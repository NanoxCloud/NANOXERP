/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var arrExpFunctions=["getstockvalue","getcostrate","getclosingstock","checkstock","domrp"],saveActRecSuccess=!1,AxActionSave=!1,iViewRefresh=!1;WrkflFlag=!1;var axFramReload=!1,isMobile=isMobileDevice();function CheckExpFunctions(e){for(var a=!1,t=0;t<arrExpFunctions.length;t++)if(-1!=e.indexOf(arrExpFunctions[t].toLowerCase())){a=!0;break}return a}function EvaluateAxFunction(e,a,t){var r=AxActiveRowNo,o=AxActivePRow,i=AxActiveDc,l=AxActivePDc,n=FldOldValue,s=GetFldNamesIndx(e),d="",c="";if(-1!=s&&(d=GetExpressionType(e,s),c=Expressions[s].toString()),CheckExpFunctions(c.toLowerCase()))GetDependents(a,"");else{var p=GetFieldGridType(a),m=e,f=GetDcNo(m);if(-1!=s&&""!=c){var u="";if("NG"==d&&"NG"==p)"axpattachmentpath"==m?(m=m+"000F"+f,"username"==(u=c.substring(1,c.length-1))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u)):"username"==(u=EvalPrepared(m=m+"000F"+f,"000",c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u);else if("NG"==d&&"GR"==p){var v=GetClientRowNo(AxActiveRowNo,f);"username"==(u=EvalPrepared(m=m+v+"F"+f,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u)}else if("GR"!=d&&"PG"!=d||"NG"!=p){if("GR"==d&&"GR"==p){v=GetClientRowNo(AxActiveRowNo,AxActiveDc);var g=GetDcNo(m);if(AxActiveDc!=g){G=0;G=parseInt(GetDcRowCount(g),10);for(P=1;P<=G;P++){k=GetClientRowNo(P,g);AxActiveRowNo=GetDbRowNo(k,g);I=m+k+"F"+g;"username"==(u=Evaluate(I,k,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(I,u)}}else{var h=m;if(m=m+v+"F"+AxActiveDc,isEvalGrid=!1,"username"==(u=m.indexOf("_referimages")>-1||m.indexOf("dc"+g+"_image")>-1||m.indexOf("dc"+g+"_imagepath")>-1?GetReferExpr(m,v,c):Evaluate(m,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u),AxActiveDc==g&&(isSumTillGrid||isEvalGrid)){isSumTillGrid=!1;$="";if(isEvalGrid)try{var w=regVarFldExp.filter(function(e){return e.startsWith(h.toLowerCase()+"♦")});if(w.length>0){var x=w[0].split("♦")[1];-1!=x&&($=x)}else{var A=FNames.filter(function(e){return e.toLowerCase()=="rvar_"+h.toLowerCase()});if(""!=A){var b=GetFldNamesIndx(A),C=Expressions[b].toString();regVarFldExp.push(h+"♦"+A+"♠"+C),$=A+"♠"+C}else regVarFldExp.push(h+"♦-1")}}catch(B){}isEvalGrid=!1;G=0;G=parseInt(GetDcRowCount(g),10);for(P=1;P<=G;P++){k=GetClientRowNo(P,g);AxActiveRowNo=GetDbRowNo(k,g);I=h+k+"F"+g;if(("username"!=(u=Evaluate(I,k,c,"expr"))||"usergroup"!=u||u!=undefined||"undefined"!=u.toString())&&(Assignfldval(I,u),""!=$))try{var F=$.split("♠"),D=F[0]+k+"F"+g;Evaluate(D,k,F[1],"expr")}catch(B){}}isEvalGrid=!1}}}else if("PG"==d&&"PG"==p){v=GetClientRowNo(AxActiveRowNo,AxActiveDc);"username"==(u=EvalPrepared(m=m+v+"F"+AxActiveDc,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u)}else if("PG"==d&&"GR"==p){var N=GetFieldsDcNo(a);AxActivePRow=AxActiveRowNo,AxActiveDc=f,AxActivePDc=N;var y=GetClientRowNo(AxActivePRow,AxActivePDc),S=GetPopRows(AxActivePDc,y,AxActiveDc).split(","),R=m;for(P=0;P<S.length;P++)""!=S[0]&&(AxActiveRowNo=GetDbRowNo(S[P],AxActiveDc),"username"==(u=EvalPrepared(m=R+S[P]+"F"+f,S[P].toString(),c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u))}else if("GR"==d&&"PG"==p){f!=(N=GetFieldsDcNo(a))&&(AxActiveRowNo=AxActivePRow,AxActiveDc=f);var j=GetClientRowNo(AxActiveRowNo,AxActiveDc);"username"==(u=EvalPrepared(m=m+j+"F"+AxActiveDc,j,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(m,u)}}else{var G=0;G=parseInt(GetDcRowCount(f),10);for(var P=1;P<=G;P++){var k=GetRowNoHelper(P);AxActiveRowNo=GetDbRowNo(k,f);var I=m+k+"F"+f;if(isEvalGrid=!1,"username"==(u=Evaluate(I,k,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||Assignfldval(I,u),isEvalGrid){var $="";try{var O=regVarFldExp.filter(function(e){return e.startsWith(m.toLowerCase()+"♦")});if(O.length>0){var T=O[0].split("♦")[1];-1!=T&&($=T)}else{var V=FNames.filter(function(e){return e.toLowerCase()=="rvar_"+m.toLowerCase()});if(""!=V){var E=GetFldNamesIndx(V),L=Expressions[E].toString();regVarFldExp.push(m+"♦"+V+"♠"+L),$=V+"♠"+L}else regVarFldExp.push(m+"♦-1")}}catch(B){}if(isEvalGrid=!1,""!=$)try{var W=$.split("♠"),U=W[0]+k+"F"+f;Evaluate(U,k,W[1],"expr")}catch(B){}}}}isSumTillGrid!=undefined&&(isSumTillGrid=!1),AxActiveRowNo=r,AxActivePRow=o,AxActiveDc=i,AxActivePDc=l,FldOldValue=n}}}function EvaluateAxFunctionPerf(e,a,t){var r=AxActiveRowNo,o=AxActivePRow,i=AxActiveDc,l=AxActivePDc,n=FldOldValue,s=GetFldNamesIndx(e),d="",c="";if(-1!=s&&(d=GetExpressionType(e,s),c=Expressions[s].toString()),CheckExpFunctions(c.toLowerCase()))GetDependents(a,"");else{var p=GetFieldGridType(a),m=e,f=GetDcNo(m);if(-1!=s&&""!=c){var u="";if("NG"==d&&"NG"==p)"axpattachmentpath"==m?(m=m+"000F"+f,"username"==(u=c.substring(1,c.length-1))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u)):"username"==(u=EvalPrepared(m=m+"000F"+f,"000",c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u);else if("NG"==d&&"GR"==p){"username"==(u=EvalPrepared(m=m+(v=GetClientRowNo(AxActiveRowNo,f))+"F"+f,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u)}else if("GR"!=d&&"PG"!=d||"NG"!=p){if("GR"==d&&"GR"==p){var v=GetClientRowNo(AxActiveRowNo,AxActiveDc),g=GetDcNo(m);if(AxActiveDc!=g){D=0;D=parseInt(GetDcRowCount(g),10);for(N=1;N<=D;N++){S=GetClientRowNo(N,g);AxActiveRowNo=GetDbRowNo(S,g);y=m+S+"F"+g;"username"==(u=Evaluate(y,S,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(y,u)}}else{var h=m;if("username"==(u=(m=m+v+"F"+AxActiveDc).indexOf("_referimages")>-1||m.indexOf("dc"+g+"_image")>-1||m.indexOf("dc"+g+"_imagepath")>-1?GetReferExpr(m,v,c):Evaluate(m,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u),AxActiveDc==g&&isSumTillGrid){isSumTillGrid=!1;var w=parseInt(AxActiveRowNo)+1;D=0;D=parseInt(GetDcRowCount(g),10);for(N=w;N<=D;N++){S=GetClientRowNo(N,g);AxActiveRowNo=GetDbRowNo(S,g);y=h+S+"F"+g;"username"==(u=Evaluate(y,S,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(y,u)}}}}else if("PG"==d&&"PG"==p){"username"==(u=EvalPrepared(m=m+(v=GetClientRowNo(AxActiveRowNo,AxActiveDc))+"F"+AxActiveDc,v,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u)}else if("PG"==d&&"GR"==p){var x=GetFieldsDcNo(a);AxActivePRow=AxActiveRowNo,AxActiveDc=f,AxActivePDc=x;var A=GetClientRowNo(AxActivePRow,AxActivePDc),b=GetPopRows(AxActivePDc,A,AxActiveDc).split(","),C=m;for(N=0;N<b.length;N++)""!=b[0]&&(AxActiveRowNo=GetDbRowNo(b[N],AxActiveDc),"username"==(u=EvalPrepared(m=C+b[N]+"F"+f,b[N].toString(),c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u))}else if("GR"==d&&"PG"==p){f!=(x=GetFieldsDcNo(a))&&(AxActiveRowNo=AxActivePRow,AxActiveDc=f);var F=GetClientRowNo(AxActiveRowNo,AxActiveDc);"username"==(u=EvalPrepared(m=m+F+"F"+AxActiveDc,F,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(m,u)}}else{var D=0;D=parseInt(GetDcRowCount(f),10);for(var N=1;N<=D;N++){var y,S=GetRowNoHelper(N);AxActiveRowNo=GetDbRowNo(S,f),"username"==(u=EvalPrepared(y=m+S+"F"+f,S,c,"expr"))&&"usergroup"==u&&u==undefined&&"undefined"==u.toString()||AssignfldvalPerf(y,u)}}isSumTillGrid!=undefined&&(isSumTillGrid=!1),AxActiveRowNo=r,AxActivePRow=o,AxActiveDc=i,AxActivePDc=l,FldOldValue=n}}}function GetFldNamesIndx(e){for(var a=-1,t=0;t<ExpFldNames.length;t++){if(ExpFldNames[t].split(".")[1]==e){a=t;break}}return a}function GetExpressionType(e,a){var t=ExpFldNames[a].split(".")[2].substring(1);return IsDcPopGrid(t)?"PG":IsDcGrid(t)?"GR":"NG"}function GetFieldGridType(e){var a=GetFieldsDcNo(e);return IsDcPopGrid(a)?"PG":IsDcGrid(a)?"GR":"NG"}function Assignfldval(e,a){if("MessageSetAxFont"!=a){var t="",r=$j("#"+e);if(r.length>0){if("***"==r[0].value)return;$j("#"+("img~"+e)).length>0&&(isFocusFrmPickList=!0);var o=GetFieldsName(e),i=GetFieldsRowNo(e),l=GetFieldsDcNo(e),n=GetDbRowNo(i,l);TstructHasPop&&IsParentField(o,l)&&UpdatePopUpParents(e);for(var s=0,d=0;d<FNames.length;d++)if(FNames[d]==o){s=FDecimal[d],t=FDataType[d];break}if("numeric"==t.toLowerCase())a=fixit(a,s),UpdateFieldArray(e,n,a,"parent",""),a=CommaFormatted(fixit(a,s)),CallSetFieldValue(e,a);else if("text"==r[0].type||"hidden"==r[0].type)if("''"==a&&(a=""),a||(a=""),"Date/Time"==t){var c=a;if(0==a)a="",c="";else if(""!=c){(p=callParentNew("glCulture"))!=undefined&&"en-us"==p&&(c=GetDateStr(c,"mm/dd/yyyy","dd/mm/yyyy"))}UpdateFieldArray(e,n,c,"parent",""),CallSetFieldValue(e,a)}else if(""!=a){c=a;try{var p,m=a.split("/");if(2==m[0].length&&"undefined"!=typeof m[1]&&2==m[1].length&&"undefined"!=typeof m[2]&&4==m[2].length)(p=callParentNew("glCulture"))!=undefined&&"en-us"==p&&(c=GetDateStr(c,"mm/dd/yyyy","dd/mm/yyyy"))}catch(f){}UpdateFieldArray(e,n,c,"parent",""),CallSetFieldValue(e,a)}else UpdateFieldArray(e,n,a,"parent",""),CallSetFieldValue(e,a);else"character"==t.toLowerCase()&&(a=a.toString()),UpdateFieldArray(e,n,a,"parent",""),CallSetFieldValue(e,a);-1!=o.indexOf("axpvalid")&&DoFormControlPrivilege(e,a),-1!=e.indexOf("axpcurrencydec")&&UpdateAxpCurrDec(a,"GetDep")}}}function AssignfldvalPerf(e,a){if("MessageSetAxFont"!=a){var t="",r=GetFieldsName(e),o=GetFieldsRowNo(e),i=GetFieldsDcNo(e),l=GetDbRowNo(o,i);TstructHasPop&&IsParentField(r,i)&&UpdatePopUpParents(e);for(var n=0,s=0;s<FNames.length;s++)if(FNames[s]==r){n=FDecimal[s],t=FDataType[s];break}"numeric"==t.toLowerCase()?(a=fixit(a,n),UpdateFieldArray(e,l,a,"parent",""),a=CommaFormatted(fixit(a,n)),CallSetFieldValue(e,a)):"Date/Time"==t?(0==a&&(a=""),UpdateFieldArray(e,l,a,"parent",""),CallSetFieldValue(e,a)):("character"==t.toLowerCase()&&(a=a.toString()),UpdateFieldArray(e,l,a,"parent",""),CallSetFieldValue(e,a)),-1!=r.indexOf("axpvalid")&&DoFormControlPrivilege(e,a),-1!=e.indexOf("axpcurrencydec")&&UpdateAxpCurrDec(a,"GetDep")}}function CallFileUploadAction(actionName,Title,ftype,confirmmsg){if(confirmmsg&&""!=confirmmsg){var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var CallFileUploadActionCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:confirmmsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){CallFileUploadActionCB.close(),CallFileUploadActionAfterConfirm()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}function CallFileUploadActionAfterConfirm(){Title="File Upload",gActionname=actionName,gConfirmmsg=confirmmsg,displayBootstrapModalDialog("File Upload","xs","147px",!0,"./fileupload.aspx?act=upload")}CallFileUploadActionCB===undefined&&CallFileUploadActionAfterConfirm()}function CallAfterFileUploadAction(){var e=$j("#cb_sactbu").val();CallAction(gActionname,e,gConfirmmsg)}function GetCancelRemarks(e,a,t){ShowPrompt(e,a,t,!0)}function ShowPrompt(actionName,fileup,manRemarks,isRemarksEntered){var msgStatus=!0,i=0;try{var AxHeader=AxBeforeShowPrompt()}catch(ex){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"})}var cutMsg=eval(callParent("lcm[38]")),cutMsgEnter=eval(callParent("lcm[39]")),cutMsgChar=eval(callParent("lcm[40]"));$j.msgBox({type:"prompt",title:"Remarks",inputs:[0==isRemarksEntered?{header:cutMsg,type:"label",name:""}:{},AxHeader==undefined?{header:cutMsgEnter,type:"textarea",name:"remark"}:{header:AxHeader,type:"textarea",name:"remark"},{header:cutMsgChar,type:"readonly",value:"150"}],buttons:[{value:"Ok"},{value:"Close"}],afterClose:function(){msgStatus||ShowPrompt(actionName,fileup,manRemarks,!1)},success:function(e,a){"Ok"==e?""==a[0].value&&"y"==manRemarks?msgStatus=!1:(CallActionExt(actionName,fileup,a[0].value),msgStatus=!0):(actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),EnableToolBarBtns())}}),isWizardTstruct&&$j(".msgBox").css("z-index","999"),ShowDimmer(!1)}function EnableToolBarBtns(){$j("#icons").length>0&&$j("#icons").prop("disabled")&&$j("#icons").prop("disabled",!1)}function CheckDisabledActionBtn(e){var a=!1;return $j(".action").each(function(){var t=$j(this).html().toLowerCase(),r=t.substring(t.indexOf("callaction")+11).indexOf("&quot;"+e+"&quot;");if(-1==r&&(r=t.substring(t.indexOf("callaction")+11).indexOf('"'+e+'"')),-1!=r&&"disabled"==$j(this).attr("disabled"))return a=!0,!1}),a}function CallAction(e,a,t,r,o,i,l){if(actionCallFlag==actionCallbackFlag){actionCallFlag=Math.random(),$("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"auto"});try{clickedButtonCaption=this.event.currentTarget.text}catch(p){}if($j("#hdnActionName").val(e),i==undefined&&(i=""),AxActiveAction=e,CheckDisabledActionBtn(e)||AxIsTstructLocked)return actionCallbackFlag=actionCallFlag,void $("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"});ShowDimmer(!0),""!=currentCK&&ShowdivContentCK($("#"+currentCK),!1);var n=!0;try{n=AxBeforeCallAction(e)}catch(p){}if(n==undefined&&(n=!0),n){try{var s=$j.inArray(e,tstActionName);if("undefined"!=typeof actSaveTask&&"save"==actSaveTask[s]&&!ValidateBeforeSubmit())return ShowDimmer(!1),AxWaitCursor(!1),actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),GetProcessTime(),void GetTotalElapsTime();if(s>-1&&"undefined"!=typeof actScriptTask&&(actScriptTask[s].startsWith("loadform♠")||actScriptTask[s].startsWith("loadformanddata♠")||actScriptTask[s].startsWith("loadiview♠")||actScriptTask[s].startsWith("loadpage♠")||actScriptTask[s].startsWith("openpage♠"))){var d=actScriptTask[s];return d=d.split("♠")[1],void EvaluateScriptFormControl(d)}var c=$j.inArray(e,SFCActionName);if(c>-1&&"undefined"!=typeof SFormControls&&"undefined"!=typeof SFormControls[c]&&(SFormControls[c].toLowerCase().startsWith("loadform(")||SFormControls[c].toLowerCase().startsWith("loadformanddata(")||SFormControls[c].toLowerCase().startsWith("loadiview(")||SFormControls[c].toLowerCase().startsWith("loadpage(")||SFormControls[c].toLowerCase().startsWith("openpage(")))return void EvaluateScriptFormControl(SFormControls[c])}catch(p){}if("y"==r){if("0"==$j("#recordid000F0").val())return showAlertDialog("warning",2009,"client"),actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),void ShowDimmer(!1);if("cancelled"==tstructCancelled.toLowerCase())return showAlertDialog("error",2024,"client"),actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),void ShowDimmer(!1);if(!AxAllowCancel)return actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ShowDimmer(!1),showAlertDialog("error",2025,"client")}if($j("#icons").length>0&&$j("#icons").prop("disabled"))return actionCallbackFlag=actionCallFlag,void $("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"});if($j("#icons").length>0&&$j("#icons").prop("disabled",!0),t==undefined&&(t=""),""!=t&&!confrm&&!confirm(t))return EnableToolBarBtns(),actionCallbackFlag=actionCallFlag,ShowDimmer(!1),AxWaitCursor(!1),void $("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"});"y"==r?(GetCancelRemarks(e,a,o),ShowDimmer(!1)):CallActionExt(e,a,"",i,l)}}else $("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"none"})}function CallActionExt(e,a,t,r,o){GetCurrentTime("Tstruct load on Action button click(ws call)");var i=$j("#recordid000F0").val();ArrActionLog="CallAction-"+e+"Recordid-"+i,AxWaitCursor(!0);var l="";if(""!=a&&a!=undefined)if(":"==a.substring(0,1)){var n=a.substring(1,a.length);if(1==IsGridField(n));else l=$j("#"+(n+"000F0")).val()}else l=a.toString();var s,d=transid,c="",p=(i=$j("#recordid000F0").val(),0),m=0,f=e;if(-1!=e.indexOf("_")&&(-1!=$j.inArray(GetFieldsName(e),FNames)&&(s=e.lastIndexOf("_"),e=e.substring(s+1)),-1!=e.indexOf("F"))){m=parseInt(GetActiveRow(f),10)+1;var u=e.lastIndexOf("F");p=parseInt(e.toString().substring(u+1)),e=e.substring(0,u-3)}var v=traceSplitStr+"Action-"+e+traceSplitChar,g="";if(""!=l){var h=(g=l).lastIndexOf("\\");-1!=h&&(g=g.substring(h+1))}var w=GetOpenTabDcs(),x=UploadFiles(),A=GetDeletedRows(),b=GetChangedRows(),C="";t!=undefined&&(C="<cancelremarks>"+(t=CheckSpecialCharsInXml(t))+"</cancelremarks>"),c=c+'<root axpapp="'+proj+'" trace="'+v+'" recordid="'+i+'"  fno="'+p+'" afiles="'+("undefined"!=typeof headerAttachDir&&"true"==headerAttachDir.toLowerCase()?"":x)+'"  dcname="'+w+'" actrow="'+m+'" sessionid="'+sid+'"  stype="tstructs" sname="'+d+'" actname="'+e+'" __file="'+g+'" options="true" dsignstatus="'+r+'">'+C+"<varlist><row>",void 0===o&&(o=!1);try{callBackFunDtls="CallActionExt♠"+e+"♠"+a+"♠"+t+"♠"+r,GetProcessTime(),ASB.WebService.CallActionWS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,DeletedFieldValue,ArrActionLog,w,c,l,"t",A,b,tstDataId,x,o,SuccessCallbackAction,OnException)}catch(D){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),AxWaitCursor(!1);var F=D.name+"^♠^"+D.message;showAlertDialog("error",2030,"client",F),UpdateExceptionMessageInET("ActionWS exception : "+D.message),GetProcessTime(),GetTotalElapsTime()}}function SuccessCallbackAction(e,a){if(""!=e){var t=e.split("*♠*")[0],r=e.split("*♠*")[1];e=e.split("*♠*")[2],WireElapsTime(t,r)}if(""!=e){if(actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ArrActionLog="",CheckSessionTimeout(e))return;var o=e.split("*#*")[1];void 0!==o&&""!=o&&(console.log("Clearing cache in action"),ClearRedisKeys(o)),e.indexOf("*#*")>-1&&(e=e.substring(0,e.indexOf("*#*"))),ChangedFields.length=0,ChangedFieldDbRowNo.length=0,ChangedFieldValues.length=0,DeletedDCRows.length=0,DeletedFieldValue.length=0,EnableToolBarBtns();try{if(AxAftertstCallAction(e))return SetFormDirty(!1),AxWaitCursor(!1),void ShowDimmer(!1)}catch(i){}ParseServiceResult(e,"Action");try{AxAfterCallAction()}catch(i){}1==AxActionSave&&parent.axMainPageReload==transid&&(parent.doPageUnload="false",parent.window.location.href="../aspx/mainnew.aspx"),SetFormDirty(!1),AxWaitCursor(!1),ShowDimmer(!1)}else window.document.location.href.indexOf("tstruct.aspx")>-1?DataReloadDuringActionError():($("#dvlayout").hide(),AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show())}function DataReloadDuringActionError(){"undefined"!=typeof clickedButtonCaption&&""!=clickedButtonCaption||(clickedButtonCaption="Task");var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var CallAvActionCB=$.confirm({closeIcon:!1,title:eval(callParent("lcm[155]")),rtl:isRTL,onContentReady:function(){disableBackDrop("bind")},content:clickedButtonCaption+" not completed due to an unexpected error.",buttons:{buttonA:{text:"Retry",btnClass:"hotbtn",action:function(){CallAvActionCB.close(),clickedButtonCaption="",actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),ArrActionLog="",AxWaitCursor(!1),ShowDimmer(!1)}},buttonB:{text:"Abort",btnClass:"coldbtn",action:function(){clickedButtonCaption="",window.location.href=window.location.href}}}})}function EvaluateRapidExpressions(e){var a=e.split(","),t=0;for(t=0;t<a.length;t++)EvaluateAxFunction(GetFieldsName(a[t]),a[t])}var AxFormLoadSkipped=!1;function AssignLoadValues(resultJson,calledFrom,actnName,navigationURL){if(actnName=void 0!==actnName?actnName:"","This proces taking time is more than expected. You will get a notification once completed"!=resultJson){for(var resval=resultJson.split("*$*"),ind=0;ind<resval.length;ind++)if("FDCache"!=resval[ind]){var strSingleLineText=resval[ind].toString().replace(new RegExp("\\n","g"),"");if(strSingleLineText=strSingleLineText.replace(new RegExp("\\t","g"),"&#9;"),strSingleLineText=strSingleLineText.replace(/\\/g,";bkslh"),strSingleLineText=strSingleLineText.replace(new RegExp("&lt","g"),"<"),strSingleLineText=strSingleLineText.replace(new RegExp("&gt","g"),">"),""!=strSingleLineText){try{var myJSONObject=$j.parseJSON(strSingleLineText)}catch(ex){continue}if(myJSONObject.error)ExecErrorMsg(myJSONObject.error,calledFrom);else if(myJSONObject.data&&"Iview"!=calledFrom)ExecData(myJSONObject.data,calledFrom);else if(myJSONObject.evalexpr)EvaluateRapidExpressions(myJSONObject.flds);else if(myJSONObject.fastdata)ExecData(myJSONObject.fastdata,calledFrom);else if(myJSONObject.pickdata)ExecPickData(myJSONObject.pickdata,calledFrom);else if(myJSONObject.command)ExecCommand(myJSONObject.command,actnName,navigationURL);else if(myJSONObject.formcontrol)try{ExecFormControl(myJSONObject.formcontrol,calledFrom)}catch(ex){console.log(ex.message)}else if(myJSONObject.message)("undefined"==typeof pickListRowCount||pickListRowCount>0||-1==pickListRowCount)&&(1!=iViewRefresh?ExecMessage(myJSONObject.message,calledFrom):eval(callParent("ivCmdRefresh")+"= '"+myJSONObject.message[0].msg+"'"));else if(myJSONObject.wfnode)"undefined"!=typeof tstructCancelled&&"cancelled"!=tstructCancelled.toLowerCase()&&ExecWorkflow(myJSONObject.wfnode);else if(myJSONObject.attachment&&"Iview"!=calledFrom&&"iview"!=document.title.toLowerCase())ExecAttachments(myJSONObject.attachment);else if(myJSONObject.memvar)ExecMemVars(myJSONObject.memvar,calledFrom);else if(myJSONObject.timetaken)ExecTimetaken(myJSONObject.timetaken);else if(myJSONObject.result&&"Iview"!=calledFrom&&"iview"!=document.title.toLowerCase()){if(myJSONObject.result[0].action){DataReloadDuringActionError();break}}else if(myJSONObject.rowrefresh&&"true"==myJSONObject.rowrefresh&&myJSONObject.row&&"iview"==document.title.toLowerCase())ExecRefreshIviewRows(myJSONObject.row);else{if(resultJson.indexOf("dsignresult")>-1){if(myJSONObject.dsignresult){Execdsignresult(myJSONObject.dsignresult);break}continue}if(resultJson.indexOf("dsignmsg")>-1){if(myJSONObject.dsignmsg){ExecDsignMsg(myJSONObject.dsignmsg);break}continue}}"undefined"!=typeof GridDispHead&&GridDispHead&&(grDisObj!=undefined&&displayGfirstcol(grDisObj,grDisname),grDisObj="",grDisname="")}}else AxFormLoadSkipped=!0;try{AxAfterFormLoad(calledFrom)}catch(ex){}AxWaitCursor(!1),WrkflFlag||ShowDimmer(!1),myJSONObject=null}else showAlertDialog("info",appGlobalVarsObject.lcm[491])}function AssignWsPerfExprValues(e){if("undefined"!=typeof formParamFlds&&""!=formParamFlds){var a=0;formParamFlds.forEach(function(e){""!=e&&"transid"!=e&&GetActualFieldName(e).split(",").forEach(function(e){if(""!=e)try{var t=ReplaceUrlSpecialChars(formParamVals[a]);SetFieldValue(e,t);var r=GetFieldsRowNo(e),o=GetFieldsDcNo(e),i=GetDbRowNo(r,o);UpdateFieldArray(e,i,t,"parent")}catch(l){}}),a++})}"undefined"!=typeof wsPerfEvalExpClient&&""!=wsPerfEvalExpClient&&wsPerfEvalExpClient.forEach(function(e){""!=e&&GetActualFieldName(e).split(",").forEach(function(a){""!=a&&EvaluateAxFunction(e,a)})})}function AssignLoadValuesDesignMode(e,a){for(var t=e.split("*$*"),r=0;r<t.length;r++){var o=t[r].toString().replace(new RegExp("\\n","g"),"");if(""!=(o=(o=o.replace(new RegExp("\\t","g"),"&#9;")).replace(/\\/g,";bkslh"))){try{var i=$j.parseJSON(o)}catch(l){continue}if(i.formcontrol)try{ExecFormControlDesignMode(i.formcontrol,a)}catch(l){console.log(l.message)}i=null}}}function Execdsignresult(e){for(var a="",t="",r=0;r<e.length;r++)a=a+","+e[r].docname,t=t+","+e[r].docuser;dsignconfirmation(a,t)}function dsignconfirmation(documentname,users){var cutMsg=eval(callParent("lcm[41]")),cutMsgWd=eval(callParent("lcm[42]")),cutMsgOw=eval(callParent("lcm[43]")),msg="Document("+documentname+") "+cutMsg+"</br>";msg+="now pending with "+users+"  </br>",msg+="<a onclick='CallActionForDsign(\"withdraw\");'>"+cutMsgWd+"</br></br></a>",msg+="<a onclick='CallActionForDsign(\"overwrite\");'>"+cutMsgOw+"</br></a>",$j.msgBox({content:msg,type:"info"},100)}function CallActionForDsign(e){CallAction($j("#hdnActionName").val(),"","","","",e)}function ExecDsignMsg(e){showAlertDialog("info",e.msg)}function ExecTimetaken(e){ASBDbTime="",ASBTotal="";for(var a=0;a<e.length;a++)e[a].total&&(ASBTotal=e[a].total),e[a].dbtime&&(ASBDbTime=e[a].dbtime)}function ExecRefreshIviewRows(e){({apply:function(){ivirDataTableApi&&_this.getRows().length==_this.rowData.length&&_this.rows.forEach(function(e,a){var t=parseInt(e||"1");ivDatas[t-1]=_this.rowData[a],ivDatas[t-1][getPropertyAccess("rowno")]=t.toString(),refreshRow(ivirDataTableApi.row(t-1),ivDatas[t-1])})},getRows:function(){switch(_this.rows=$j("#hdnSRows").val().split("♣").filter(function(e){return e}),0==_this.rows.length&&(_this.rows=["1"]),_this.getActionEvent()){case"Current Row":case"":_this.rows=[_this.rows[0]];break;case"Each Selected Rows":_this.rows=[_this.rows[_this.rows.length-1]];break;case"All Selected Rows":default:break;case"All Rows":_this.rows=ivDatas.map(function(e){return e[getPropertyAccess("rowno")]})}return _this.rows},getActionEvent:function(){return _this.event=(eventObj=ivActions[$j("#hdnAct").val().substr(4)]||ivScripts[$j("#hdnAct").val().substr(4)])&&eventObj["@apply"]||"Current Row",_this.event},process:function(e){_this=this,_this.rowData=e,_this.apply()}}).process(e)}function CheckSpCharsInFldValue(e){for(var a=e.indexOf("^^dq");-1!=a;)a=(e=e.replace("^^dq",'"')).indexOf("^^dq");return-1!=e.indexOf(";bkslh")&&(e=e.replace(new RegExp(";bkslh","g"),"\\")),e=e.replace(new RegExp("<br>","g"),"\n")}function ExecMemVars(e,a){for(var t="",r="",o=0;o<e.length;o++){t="",r="",e[o].n&&(t=e[o].n),e[o].v&&(r=e[o].v);for(var i=-1,l=0;l<Parameters.length;l++){if(Parameters[l].split("~")[0].toString().toLowerCase()==t.toLowerCase()){i=l;break}}-1!=i?Parameters[i]=t+"~"+r:Parameters[Parameters.length]=t+"~"+r}}function ExecPickData(e,a){for(var t="",r=0,o="",i="no",l=0;l<e.length;l++)e[l].rcount?r=e[l].rcount:e[l].idupdate?i=e[l].idupdate:e[l].fname?t=e[l].fname:e[l].fvalue&&(o=e[l].fvalue);if("yes"==i&&"1"==r&&""!=t&&""!=o){var n=AxActDepFld.lastIndexOf("F"),s=AxActDepFld.substring(0,n-3),d=AxActDepFld.substring(n-3,n),c=AxActDepFld.substring(n+1);if(d=GetDbRowNo(d,c),-1!=o.indexOf("~"))o=o.split("~")[0];if(o=(o=CheckSpCharsInFldValue(o)).replace("^","¿"),isPKItemSelected=!0,s==t){UpdateFieldArray(AxActDepFld,d,o,"parent");var p=o;-1!=o.indexOf("¿")&&(p=o.substring(o.indexOf("¿")+1)),GetFieldValue(AxActDepFld)!=p&&SetFieldValue(AxActDepFld,p)}}}function ClearChecklistOnGetDep(e){var a=ClearSqlChkList(e);if(IsDcGrid(GetDcNo(GetFieldsName(e)))){var t,r="<input type='checkbox' class='multiFldChk' id='"+e+"' name='"+e+"' title='"+a+"' value='' disabled='disabled' style='display:none'> ";$j(".multiChkSpan").each(function(){if($j(this).attr("name")==e)return t=$j(this),!1});var o=$j("#chkAll_"+e);o.prop("checked")&&(o.removeAttr("checked"),o.prop("checked",!1)),o.attr("disabled","disabled"),t.append(r)}}function ExecData(dataJsonObj,calledFrom){var isExcelImp=arguments.length>2&&arguments[2]!==undefined&&arguments[2];FillGridFillRows=0,FillGridCurrentDC=0;var dcNo="0",fldName="",fldValue="",fldType="",fldDbRowNo="",masterRow=0,delRows="",tmpActiveRow="",tmpActiveDc="",isDcFormatGrid=!1,formatGridIdx=-1,dcKeyColumn="",fName="",rid=$j("#recordid000F0").val(),axActiveDc=AxActiveDc,prevFldType="",expDepArray=new Array;if("GetDep"==calledFrom&&IsDcGrid(AxActiveDc)){var dcIdx=$j.inArray(AxActiveDc,DCFrameNo);expDepArray=DCExpDeps[dcIdx].toString().split(",")}for(var comboFld="",comboVal="",comboRowNo="",depFlds="",idCol="",isPopGrid=!1,curRowNo="",dcOldHasData="",dcOldRowCount=0,isChkCleared=!1,i=0;i<dataJsonObj.length;i++){if(fldName=dataJsonObj[i].n,fldValue=dataJsonObj[i].v,fldType=dataJsonObj[i].t,fldDbRowNo=dataJsonObj[i].r,masterRow=dataJsonObj[i].mr,fldValue=CheckSpCharsInFldValue(fldValue),dataJsonObj[i].idcol&&(idCol=dataJsonObj[i].idcol),delRows=dataJsonObj[i].cr?dataJsonObj[i].cr:"","dc"==fldType){var dcHasRows="";dcHasRows=dataJsonObj[i].hasdatarows,dcNo=fldName.substring(2);var dcCaption="";dcCaption=dataJsonObj[i].c;var fgName="";if(fgName=dataJsonObj[i].fg?dataJsonObj[i].fg:"",""!=dcCaption&&SetDcCaption(dcNo,dcCaption),formatGridIdx=GetFormatGridIndex(dcNo),-1!=formatGridIdx?(isDcFormatGrid=!0,dcKeyColumn=DcKeyColumns[formatGridIdx]):(isDcFormatGrid=!1,dcKeyColumn=""),isPopGrid=!!IsDcPopGrid(dcNo),"GetDep"==calledFrom&&isPopGrid&&IsParentDc(axActiveDc)&&(DeletePopRowsAfterGetDep(),AxSubWsRows=new Array,AxSubDsRows=new Array),IsDcGrid(dcNo)){var dcIdx=$j.inArray(dcNo,DCFrameNo);dcOldHasData=DCHasDataRows[dcIdx],""!=dcHasRows&&("yes"==dcHasRows?(DCHasDataRows[dcIdx]="True","False"==dcOldHasData&&(delRows="d*,"+delRows)):"no"==dcHasRows&&(DCHasDataRows[dcIdx]="False"))}if(IsDcGrid(dcNo)&&IsDcVisible(dcNo)){if("LoadData"==calledFrom){if("0"!=recordid&&isDcFormatGrid)continue;UpdateDcRowArrays(dcNo,"001","Add")}var ind=0;if(ind=""==fgName?$j.inArray("dc"+dcNo,FillParamDCs):$j.inArray(fgName,FillGridName),-1!=ind&&""!=delRows){var fillCond=FillCondition[ind];if("INIT"==fillCond||"AOWE"==fillCond)-1==delRows.indexOf("d*")&&(delRows="d*,"+delRows),0==$("#gridHd"+dcNo+" tbody tr").length&&"GetDep"==calledFrom&&"no"==dcHasRows&&(delRows="d*");else if("APPEND"==fillCond){var existingRec=$("#gridHd"+dcNo+" tbody tr").length;existingRec>0?$("#gridHd"+dcNo).data("fg-append-rec",existingRec):0==existingRec&&"Action"==calledFrom&&-1==delRows.indexOf("d*")?(delRows="d*,"+delRows,$("#gridHd"+dcNo).removeData("fg-append-rec")):$("#gridHd"+dcNo).removeData("fg-append-rec")}}if(tmpActiveRow=AxActiveRowNo,tmpActiveDc=AxActiveDc,AxDepRows=new Array,"GetDep"==calledFrom&&isPopGrid&&IsParentDc(axActiveDc)){dcOldRowCount=GetDcRowCount(dcNo);continue}"CallAdd"!=calledFrom&&(SetRows(dcNo,fldValue,delRows,calledFrom,dcOldHasData,dcHasRows),"LoadData"==calledFrom&&fillgridColOptVisibility(dcNo)),AxActiveRowNo=tmpActiveRow,AxActiveDc=tmpActiveDc}"yes"==dcHasRows&&SetHdnRowCount(dcNo,calledFrom)}else{if(0==rid&&fldName!=undefined&&fldName==AxAutoGenFld){var hdnAutogenerateFld=$j("#hdnShowAutoGenFldValue").val();"true"==hdnAutogenerateFld.toLowerCase()||(fldValue="Auto")}if("GetDep"==calledFrom&&"cl"==prevFldType&&"dv"!=fldType&&""!=comboFld&&(ClearChecklistOnGetDep(comboFld),comboFld="",comboVal=""),"dv"==fldType)fldName=comboFld;else{if("axpcurrencydec"==fldName.toLowerCase()&&UpdateAxpCurrDec(fldValue,calledFrom),"PopGridCombos"==calledFrom&&""!=AxPopRowNo&&(fldDbRowNo=AxPopRowNo),"GetDep"==calledFrom&&IsDcPopGrid(dcNo)&&IsParentDc(axActiveDc)){var wsRowNo=fldDbRowNo,sIdx=-1;"True"!=dcOldHasData&&"1"==wsRowNo||(sIdx=$j.inArray(wsRowNo,AxSubWsRows),fldDbRowNo=GetSubDsRowNo(fldDbRowNo,dcNo)),-1==sIdx&&(AxActiveDc=dcNo,AddRowAfterGetDep(fldDbRowNo,dcNo,dcOldHasData),curRowNo=fldDbRowNo)}if("0"==dcNo&&(dcNo=GetDcNo(fldName)),fillParamId=$j.inArray("dc"+dcNo,FillParamDCs),"-1"!=fillParamId&&(fillCond=FillCondition[fillParamId],"APPEND"==fillCond)){var recCount=$("#gridHd"+dcNo).data("fg-append-rec");recCount!=undefined&&"LoadData"!=calledFrom&&"Action"!=calledFrom&&"GetDep"!=calledFrom&&(fldDbRowNo=parseInt(fldDbRowNo)+recCount)}fldName=ConstructFieldName(fldName,dcNo,fldDbRowNo),RedrawField(comboFld,calledFrom,isPopGrid),comboFld=""}if(""==fldName)continue;var fld=$j("#"+fldName),fName=GetFieldsName(fldName);if(("undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&"false"==checkIsdraft||"undefined"!=typeof AutosaveDraft&&(""==AutosaveDraft||"false"==AutosaveDraft)&&"false"==checkIsdraft)&&((-1!=fName.indexOf("axp_gridattach_")||fName.toLowerCase()=="dc"+dcNo+"_image"||fName.startsWith("axp_nga_")||fName.toLowerCase().startsWith("axpfile_"))&&(fName.startsWith("axp_nga_")||fName.toLowerCase().startsWith("axpfile_")||SetGridAttValue(fldName,fldValue),fldName.toLowerCase().startsWith("axpfile_")?ConstructAxpAttachHTML(fldValue,fldName):ConstructAttachHTML(fldValue,fldName),showAttachmentPopover()),-1!=fldName.toLowerCase().indexOf("dc"+dcNo+"_referimages")&&SetGridRefValue(fldName,fldValue)),"LoadData"==calledFrom&&isDcFormatGrid){var fIndx=fldName.lastIndexOf("F"),fRNo=GetFieldsRowNo(fldName);if(dcKeyColumn==fName){if("0"==recordid){var oldKeyVal=$j("#"+fldName).val();CallSetFieldValue(fldName,oldKeyVal);continue}continue}}if(fld.length>0){var fArrayIdx=-1;if(fArrayIdx=$j.inArray(GetFieldsName(fldName),FNames),"m"==fldType)CallSetFieldValue(fldName,fldValue);else if("cl"==fldType||"rg"==fldType)comboFld=fldName,comboVal=fldValue,isChkCleared=!1,CallSetFieldValue(fldName,fldValue),"GetDep"==calledFrom&&i+1==dataJsonObj.length?(ClearChecklistOnGetDep(comboFld),comboFld="",comboVal=""):"GetDep"==calledFrom&&$("#"+comboFld).removeData("valuelist");else if("i"==fldType)if(""!=fldValue)if(-1!=fldValue.indexOf("//"))$j("#"+fldName).attr("src",fldValue);else{var fileName=fldValue.split("\\\\"),hdnScriptsUrlPath=$j("#hdnScriptsUrlpath"),fldValuePath="";fldValuePath=fileName.length>1?hdnScriptsUrlPath[0]!=undefined?hdnScriptsUrlPath.val()+"axpert/"+sid+"/"+fileName[fileName.length-2]+"/"+fileName[fileName.length-1]:"../scripts/axpert/"+sid+"/"+fileName[fileName.length-2]+"/"+fileName[fileName.length-1]:hdnScriptsUrlPath[0]!=undefined?hdnScriptsUrlPath.val()+"axpert/"+sid+"/"+fileName[fileName.length-1]:"../scripts/axpert/"+sid+"/"+fileName[fileName.length-1],GetDateTime(),$j("#"+fldName).attr("src",fldValuePath+"?"+imageSuffix),$j("#"+fldName).parents(".image-input").find(".imageFileUpload").addClass("d-none"),$j("#"+fldName).parents(".image-input").find(".profile-pic").removeClass("d-none")}else $j("#"+fldName).hasClass("signaturePad")?$j("#"+fldName).attr("src","../AxpImages/signature.png"):$j("#"+fldName).parents(".image-input").find(".imageFileUpload").addClass("d-none"),$j("#"+fldName).parents(".image-input").find(".profile-pic").removeClass("d-none");else if("b"==fldType){if(-1!=fldName.indexOf("axpbutton")){var fIndx=fldName.lastIndexOf("F"),uIndx=fldName.lastIndexOf("_");fld.val(fldName.substring(uIndx+1,fIndx-3))}}else if("c"==fldType)if("hidden"==fld.attr("type"))CallSetFieldValue(fldName,fldValue),comboFld="";else if("checkbox"==fld.attr("type"))comboFld="","yes"==fldValue.toLowerCase()?(fld.prop("checked",!0),fld.attr("checked",!0)):(fld.prop("checked",!1),fld.attr("checked",!1));else{comboFld=fldName,comboVal=fldValue;var fIndx=fldName.lastIndexOf("F"),fName=GetFieldsName(fldName),fldIsAutoComp=!1;$j("#"+fldName).hasClass("fldFromSelect")&&(fldIsAutoComp=!0);var fldIsMultiSelect=!1;if($j("#"+fldName).hasClass("fldmultiSelect")&&(fldIsMultiSelect=!0),fldIsAutoComp||fldIsMultiSelect||ClearComboBox(fld,fName,fldValue),dataJsonObj[i].dpm){var depFldsStr=dataJsonObj[i].dpm;depFlds=depFldsStr.split(",")}masterRow!=undefined&&0!=masterRow?("1"!=fldDbRowNo&&"PopGridCombos"!=calledFrom&&(fldIsAutoComp||fldIsMultiSelect||CopyFromMasterRow(fldName,dcNo,masterRow,calledFrom,isPopGrid)),MasterRow.push(fName),CallSetFieldValue(fldName,fldValue)):(fldIsAutoComp||fldIsMultiSelect)&&CallSetFieldValue(fldName,fldValue),UpdateAssignedFld(comboFld),comboFld=""}else if("dv"==fldType&&""!=comboFld){var comboField=$j("#"+comboFld);if(comboField!=undefined)if("select-one"==comboField.prop("type")){var comboItems=fldValue.split("~"),depValue=fldValue,fldIdVal="";"yes"==idCol?(fldIdVal=comboItems[0],fldValue=comboItems[1]):fldValue=comboItems[0];var optHtml="",htmlFldVal=fldValue.replace(/ /g,"&nbsp;"),tmpVal=fldValue.replace(/ /g,String.fromCharCode(160)),comboFldnm=GetFieldsName(comboFld);if(fldValue==comboVal||comboVal==tmpVal?(optHtml="<option selected value='"+fldIdVal+"'>"+fldValue+"</option>",comboField.append(optHtml),CallSetFieldValue(comboFld,fldValue,!1,calledFrom),"001"==GetFieldsRowNo(comboFld)&&"LoadData"==calledFrom&&"0"!=rid&&$j.inArray(comboFldnm,MasterRow)>-1&&SetEditRowComboValues(comboFld,optHtml.replace("selected",""),dcNo,comboFldnm)):(optHtml="<option value='"+fldIdVal+"'>"+fldValue+"</option>",comboField.append(optHtml),"001"==GetFieldsRowNo(comboFld)&&"LoadData"==calledFrom&&"0"!=rid&&$j.inArray(comboFldnm,MasterRow)>-1&&SetEditRowComboValues(comboFld,optHtml,dcNo,comboFldnm)),null!=dataJsonObj[i].dp)for(var dependentValues=dataJsonObj[i].dp.toString().split("¿"),tmpCmoboFld=GetFieldsName(comboFld),cnt=0;cnt<dependentValues.length;cnt++)for(var strDepVals=dependentValues[cnt].split("~"),depInd=0;depInd<strDepVals.length;depInd++)ComboParentField.push(tmpCmoboFld),ComboParentValue.push(fldValue),ComboDepField.push(depFlds[depInd]),ComboDepValue.push(strDepVals[depInd])}else if(!("checkbox"!=comboField.attr("type")&&"checkbox"!=comboField.data("type")&&"radio"!=comboField.attr("type")||"undefined"!=typeof IsObjCustomHtml&&"False"!=IsObjCustomHtml)){var spanClass="",align="",strChecked="",fldClass="",fldHint="",IsChkList="checkbox"==comboField.attr("type")||"checkbox"==comboField.data("type"),tmpFld;if(IsChkList){spanClass=".multiChkSpan",align="<div class='clear'></div>";var chkValSep=GetChkSeparator(GetFieldsName(comboFld)),arrChkItems=comboVal.split(chkValSep);-1!=$j.inArray(fldValue,arrChkItems)&&(strChecked="checked=checked"),0==isChkCleared&&(comboField.hasClass("multiFldChk")||(fldHint=ClearSqlChkList(comboFld),isChkCleared=!0)),fldClass="type=checkbox class='multiFldChk'"}else spanClass=".multiRgrpSpan,.multiFldRdg",align="&nbsp;&nbsp;&nbsp;&nbsp;","v"==FldAlignType[fArrayIdx].toLowerCase()&&(align="<div class='clear'></div>"),comboVal==fldValue&&(strChecked="checked=checked"),0==isChkCleared&&(fldHint=ClearRadioGrp(comboFld),isChkCleared=!0),fldClass="type=radio class='form-check-input h-40px w-40px multiFldRdg'";var tmpID="";try{tmpFld=$j(spanClass+"[name="+comboFld+"]"),tmpID=tmpFld.attr("name")}catch(ex){}var radioDisabled="";tmpFld!=undefined&&tmpFld.hasClass("flddis")&&(fldClass+=" disabled",radioDisabled=" disabled=disabled");var chkId=tmpID;fldValue=CheckSpecialCharsInStr(fldValue),""!=fldValue&&(fldValue=fldValue.replace(/&amp;/g,"&"),fldValue=fldValue.replace("/&apos;/g","'"));var fldclText="",fldclValue="";"yes"==idCol?(fldclValue=fldValue.split("~")[0],fldclText=fldValue.split("~")[1]):(fldclValue=fldValue,fldclText=fldValue);var chkHtml="";if(chkHtml=IsChkList?"<span><input "+fldClass+" id='"+(IsChkList?chkId:fldName)+"' onchange='CallMainBlur(this)'  name='"+(IsChkList?chkId:fldName)+"' title='"+fldHint+"' value='"+fldclValue+"' "+strChecked+" ></input>"+fldclText+align+"</span>":'<div class="agform form-check form-check-custom form-check-solid px-1 col-md-2 align-self-end"><input '+fldClass+" id='"+(IsChkList?chkId:fldName)+"' onchange='CallMainBlur(this)'  name='"+(IsChkList?chkId:fldName)+"' title='"+fldHint+"' value='"+fldclValue+"' "+strChecked+radioDisabled+' /><label class="form-check-label form-label col-form-label" for="'+(IsChkList?chkId:fldName)+'">'+fldclValue+"</label></div>",IsDcGrid(dcNo)||"radio"==comboField.attr("type"));else{var tokenData=$("#"+tmpID).data("valuelist"),tokens=[];tokens="object"==_typeof(tokenData)?tokenData:$("#"+tmpID).data("valuelist").split($("#"+tmpID).data("separator")).map(function(e){return{value:e,label:e}}).filter(function(e){return e.value&&e.label}),tokens.push({value:fldclValue,label:fldclText}),tokens=_toConsumableArray(new Set(tokens)),$("#"+tmpID).data("valuelist",tokens);try{$("#"+tmpID).data("bs.tokenfield").$input.autocomplete({source:tokens})}catch(ex){}}if(IsChkList){var chkAllObj=$j("#chkAll_"+chkId);chkAllObj.hasClass("flddis")||chkAllObj.removeAttr("disabled");var hideAllObj=$j("#hideAll_"+chkId);if(hideAllObj.removeAttr("disabled"),chkAllObj.length>0){var itemLength=$j("input[name='"+chkId+"']").length;arrChkItems.length<itemLength?(chkAllObj.removeAttr("checked"),chkAllObj.prop("checked",!1)):""!=comboVal&&arrChkItems.length==itemLength&&(chkAllObj.attr("checked","checked"),chkAllObj.prop("checked",!0))}}else $j("div[id*='"+fName+"']").find("input[data-dummyradio=true]").remove(),"radio"==comboField.attr("type")?$j("#dv"+fName).find(".input-group").append(chkHtml):$j("#dv"+fName).append(chkHtml)}}if("dc"!=fldType&&"dv"!=fldType){try{if(fldName.toLowerCase().startsWith("axpfilepath_")){var prevafpval=GetFieldValue(fldName);""!=prevafpval&&(axpfilepathold=GetFieldValue(fldName))}}catch(ex){}if("s"==fldType||"m"==fldType||"cb"==fldType||"rg"==fldType){CallSetFieldValue(fldName,fldValue,!1,calledFrom);var dwbfieldName=GetFieldsName(fldName),dwbfldInd=GetFieldIndex(dwbfieldName),fldDType=GetDWBFieldType(fldName,dwbfldInd);if(fldName.startsWith("axptm_")||fldName.startsWith("axpdbtm_")||""!=fldDType&&"time"==fldDType.toLowerCase()){var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var dvId=$("#"+fldName).parents("[id^='divDc']").attr("id");TimePickerEvent("#"+dvId,dtpkrRTL)}}("PopGridCombos"==calledFrom||"Action"==calledFrom||"GetDep"==calledFrom||void 0!==isExcelImp&&1==isExcelImp)&&UpdateFieldArray(fldName,fldDbRowNo,fldValue,"parent");var glCulture=eval(callParent("glCulture"));if(glCulture!=undefined&&"en-us"==glCulture){var fdName=GetFieldsName(fldName),fldDIndex=$j.inArray(fdName,FNames),fldDType=GetFieldType(fdName,fldDIndex);if(fldDType!=undefined&&"date/time"==fldDType.toLowerCase()){var fldDValue=DateDisplayFormat(fldValue);CallSetFieldValue(fldName,fldDValue,!1,calledFrom)}}fldName.toLowerCase().startsWith("axpfilepath_")&&AxpFilePathChange(fldName)}}var grfdName=GetFieldsName(fldName);!axInlineGridEdit&&"form"==AxpGridForm&&IsGridField(grfdName)&&formGridRowBlur($("#"+fldName))}-1!=fldName.indexOf("axpvalid")&&DoFormControlPrivilege(fldName,fldValue),"dc"!=fldType&&"dv"!=fldType&&UpdateOldValues(fldName,fldValue),prevFldType=fldType}if("LoadData"==calledFrom&&"0"==recordid&&AxAutoGenFld!=undefined&&SetAutoGenerateValue(calledFrom),"LoadData"==calledFrom&&"0"!=recordid||1==IsDraftLoad?(UpdatePopGridInfo(),GetHtmlForFormatGrids()):"LoadData"!=calledFrom&&("GetDep"==calledFrom&&(AxActiveDc=axActiveDc),AssignPopGridRows(),ArrPopNewDcs=new Array,ArrPopNewRows=new Array),"LoadData"==calledFrom&&"0"!=recordid&&1==isGridFileUploadOnLoad){isGridFileUploadOnLoad=!1;for(var i=0;i<DCName.length;i++){var _dvId=DCName[i],dvDcNo=_dvId.substr(2);IsDcGrid(dvDcNo)&&DropzoneInit("#divDc"+dvDcNo)}}CallEvalExpOnFormSkip()}function SetAutoGenerateValue(e){var a=GetDcNo(AxAutoGenFld),t="";t=IsDcGrid(a)?ConstructFieldName(AxAutoGenFld,a,"001"):ConstructFieldName(AxAutoGenFld,a,"000"),"false"==$j("#hdnShowAutoGenFldValue").val().toLowerCase()&&CallSetFieldValue(t,"Auto",!1,e)}function CallEvalExpOnFormSkip(){if(AxFormLoadSkipped){AxFormLoadSkipped=!1;for(var e=0;e<FNames.length;e++){var a=GetFldNamesIndx(FNames[e]),t="";if(-1!=a&&(t=Expressions[a].toString()),""!=t){var r="";r=IsGridField(FNames[e])?FNames[e]+"001F"+FldFrameNo[e]:FNames[e]+"000F"+FldFrameNo[e],EvaluateAxFunction(FNames[e],r),UpdateFieldArray(r,1,GetFieldValue(r),"parent","FormLoad")}}}}function SetHdnRowCount(e,a){if("GetTabData"==a&&$j("#hdnRCntDc"+e).length>0){var t=parseInt($j("#hdnRCntDc"+e).val(),10)+1;$j("#hdnRCntDc"+e).val(t),UpdateDcRowArrays(e,GetRowNoHelper(t),"Add")}}function SetEditRowComboValues(e,a,t,r){var o=GetDcRowCount(t),i=GetRowNoHelper(o);$j("#"+r+i+"F"+t).append(a)}function CallMainBlur(e){var a=e.id;MainBlur($j("#"+a))}function RedrawField(e,a,t){if(""!=e&&(window.navigator.userAgent.indexOf("MSIE ")>0?($j("#"+e).css("background-color","white"),$j("#"+e).focus()):$j("#"+e).hide().show(),"LoadData"==a&&!IsDraftLoad&&$j("#"+e).length>0)){if(t)return;$j("#"+e).width($j("#"+e).width()+2)}}function GetHtmlForFormatGrids(){var e=$j("#dvFormatDc").html();$j("#dvFormatDc").html(""),AssignHTML(e,"LoadData","")}function UpdateOldValues(e,a){var t=$j.inArray(FldLoadedFields,e);-1==t?(FldLoadedFields.push(e),FldLoadedValues.push(a)):FldLoadedValues[t]=a}function UpdateNewPopInfo(e,a){var t=$j.inArray(e,ArrPopNewDcs);if(-1!=t)if(""!=ArrPopNewRows[t]){-1==ArrPopNewRows[t].indexOf(a)&&(ArrPopNewRows[t]+=","+a)}else ArrPopNewRows[t]=ArrPopNewRows[t];else ArrPopNewDcs.push(e),ArrPopNewRows.push(a)}function AssignPopGridRows(){if(TstructHasPop)for(var e=0;e<ArrPopNewDcs.length;e++){var a=$j.inArray(ArrPopNewDcs[e],PopGridDCs),t=PopGridDCs[a].toString(),r=PopParentDCs[a].toString(),o=$j.inArray(r,DCFrameNo);if("false"!=DCHasDataRows[o].toString().toLowerCase()&&(o=$j.inArray(ArrPopNewDcs[e],DCFrameNo),"false"!=DCHasDataRows[o].toString().toLowerCase()))for(var i=ArrPopNewRows[e].split(","),l=0;l<i.length;l++){var n=i[l],s=PopParentFlds[a].split(","),d="";for(ind=0;ind<s.length;ind++){var c=GetSubFieldId("sub"+t+"_"+s[ind],n,t),p=GetFieldValue(c);-1!=p.indexOf(",")&&(p=removeCommas(p)),""==d?d=p:d+="¿"+p}UpdateParentStr(r,t,d,n)}}}function ClearPopRowsArray(){for(var e=0;e<PopRows.length;e++)PopRows[e]=""}function UpdatePopGridInfo(){if(TstructHasPop){ClearPopRowsArray();for(var e=0;e<PopGridDCs.length;e++){var a=PopGridDCs[e].toString(),t=GetDcRowCount(a),r=PopParentDCs[e].toString(),o=PopParentFlds[e].split(","),i=$j.inArray(r,DCFrameNo);if("false"!=DCHasDataRows[i].toString().toLowerCase()&&(i=$j.inArray(a,DCFrameNo),"false"!=DCHasDataRows[i].toString().toLowerCase()))for(var l=1;l<=t;l++){var n=GetClientRowNo(l,a),s="";for(ind=0;ind<o.length;ind++){var d=GetSubFieldId("sub"+a+"_"+o[ind],n,a),c=GetFieldValue(d);""==s?s=c:s+="¿"+c}UpdateParentStr(r,a,s,n)}}}}function UpdateParentStr(e,a,t,r){for(var o=0;o<ParentDcNo.length;o++){var i=PopParentsStr[o].toLowerCase(),l=t.toLowerCase();if(i=ReplaceCharsInParStr(i),l=ReplaceCharsInParStr(l),ParentDcNo[o]==e&&PopGridDcNo[o]==a&&i==l){var n=PopRows[o].toString();if(""==n)n=r;else{var s=n.split(",");-1==$j.inArray(r,s)&&(n+=","+r)}PopRows[o]=n;break}}}function ReplaceCharsInParStr(e){return e=(e=e.replace(/,/g,"")).replace(/\./g,"")}function ExecAttachments(e){for(var a=0;a<e.length;a++){for(var t=e[a].att,r=(t=t.split(",")).length,o=($j("#recordid000F0").val(),0);o<r;o++)-1==fileonloadarray.indexOf(t[o].toString())&&fileonloadarray.push(t[o].toString());fileonloadarray.length>0&&$j("#attachment-overlay").removeClass("d-none")}}function ExecWorkflow(e){var a=!1,t="",r="";getComntWf(!1);for(var o=0;o<e.length;o++){if($j("#workflowoverlay").removeClass("d-none"),e[o].btn){var i=e[o].btn,l=new Array;if(""!=i){l=i.split("~"),ReadonlyWfButtons();for(var n=0;n<l.length;n++)"a"==l[n]?($j("#btntabapprove").prop("disabled",!1),$j("#btntabapprove").removeClass("disablewfbuttons").addClass("enablewfbuttons"),$j("#selectbox").append('<div class="Selectboxlist menu-item px-3" id="Approve"><a href="javascript:void(0);"  onclick="SlectBoxWrf(\'Approve\')" class="menu-link px-3">Approve</a></div>')):"r"==l[n]?($j("#btntabreject").prop("disabled",!1),$j("#btntabreject").removeClass("disablewfbuttons").addClass("enablewfbuttons"),$j("#selectbox").append('<div class="Selectboxlist menu-item px-3" id="Reject"><a href="javascript:void(0);" onclick="SlectBoxWrf(\'Reject\')" class="menu-link px-3">Reject</a></div>')):"t"==l[n]?($j("#btntabreturn").prop("disabled",!1),$j("#btntabreturn").removeClass("disablewfbuttons").addClass("enablewfbuttons"),$j("#selectbox").append('<div class="Selectboxlist menu-item px-3" id="Return"><a href="javascript:void(0);"  onclick="SlectBoxWrf(\'Return\')" class="menu-link px-3">Return</a></div>')):"v"==l[n]&&($j("#btntabreview").prop("disabled",!1),$j("#btntabreview").removeClass("disablewfbuttons").addClass("enablewfbuttons"),$j("#selectbox").append('<div class="Selectboxlist menu-item px-3" id="Review"><a href="javascript:void(0);" onclick="SlectBoxWrf(\'Review\')" class="menu-link px-3">Review & Forward</a></div>')),a=!0}else $("#selectbox").attr("disabled","disabled"),$(".wrkflwinline").addClass("hide"),ReadonlyWfButtons()}else if(0==a)$("#selectbox").attr("disabled","disabled"),$(".wrkflwinline").addClass("hide"),ReadonlyWfButtons();else{var s=$j("#txtCommentWF");s.length>0&&s.prop("disabled",!1)}if(e[o].status&&$j("#lblStatus").text(e[o].status),e[o].lno&&$j("#hdnWfLno").val(e[o].lno),e[o].elno){$j("#hdnWfELno").val(e[o].elno);var d=e[o].elno}if(e[o].appstatus&&(appstatus=e[o].appstatus,("Approved"==appstatus&&1==AxOnApproveDisable||"Rejected"==appstatus&&1==AxOnRejectDisable)&&Readonlyform()),e[o].readonlyform&&"true"==e[o].readonlyform&&Readonlyform(),e[o].allowcancel&&(AxAllowCancel="true"==e[o].allowcancel.toString().toLowerCase()),e[o].maxlevel&&(r=e[o].maxlevel),e[o].pdcomments&&(tstWFpdcomments=e[o].pdcomments),e[o].wkid&&(tstWorkFlowId=e[o].wkid),e[o].levels){var c,p=getWfUsrName(r,e[o].levels),m=getWfStatus(r,e[o].levels);e[o].levels[0].lno;-1==$.inArray("",p)?(t=constructWrkHtml(r,p,m,d,e[o].levels),$(t).insertAfter($(".icobtn")),$("#stratWrkf").after($(".workflowMsg").detach()),0!=$("#workflowdropdown").length?($("#workflowdropdown").append($("#selectbox").detach()),$("#selectbox").removeClass("initialized"),$(".wfselectbox").hasClass("d-none")?$(".wfselectbox").removeClass("d-none"):$(".wfselectbox").addClass("d-none")):$(".icobtn").append($(".dropbox").detach()),popoverWrkFl()):(getWfLevelUSsrs($.inArray("",p),r,p,m,d,e[o].levels),0!=$("#workflowdropdown").length&&($("#workflowdropdown").append($("#selectbox").detach()),$("#selectbox").removeClass("initialized")),$(".wfselectbox").hasClass("d-none")?$(".wfselectbox").removeClass("d-none"):$(".wfselectbox").addClass("d-none")),null===(c=KTMenu)||void 0===c||c.init()}}d>0&&($(".wrkflwPending").addClass("wrkflwPendingCls"),$(".downArr").addClass("workflowdropdownCls"),$(".icobtn").addClass("iconbtnCls")),"true"==AxIsTstructLocked&&($("#selectbox").attr("disabled","disabled"),$(".wrkflwinline").addClass("hide"))}function ExecMessage(messageJsonObj,calledFrom){for(var i=0;i<messageJsonObj.length;i++){var msgs=messageJsonObj[i].msg;if(!(void 0!==$j("#middle1",parent.document).attr("src")&&0===$j("#middle1",parent.document).attr("src").indexOf("tstruct.aspx")&&"iview"!=document.title.toLowerCase()&&IsPickListField(AxActDepFld)&&msgs.indexOf("Invalid selection")>-1&&"GetDep"==calledFrom)){if(msgs.indexOf("recordid")>-1){var msgsArray=msgs.split(",");msgs="";for(var x=0;x<msgsArray.length;x++)-1==msgsArray[x].indexOf("recordid=")&&(x==msgsArray.length-1?msgs+=msgsArray[x]:msgs+=msgsArray[x]+",")}msgs.indexOf("errfld")>-1&&(msgs=msgs.substring(0,msgs.lastIndexOf("errfld")-2)),msgs=msgs.split(",");for(var responsemsgFlds=msgs.length,msg="",mm=0;mm<responsemsgFlds;mm++){msg+=msgs[mm]+",";var stPos=msg.indexOf("["),endPos=msg.indexOf("]"),errFld=msg.substring(stPos+1,endPos);if(""!=errFld){var nerr=msg.substring(stPos,endPos+2);msg=msg.replace(nerr,""),alertType="error"}for(var index=msg.indexOf("^^dq");-1!=index;)msg=msg.replace("^^dq",'"'),index=msg.indexOf("^^dq")}if(""!=msg){if("Action"==calledFrom&&msg.indexOf("recordid")>0&&(msg=msg.substr(0,msg.indexOf("recordid"))),1==saveActRecSuccess&&(alertType="success",saveActRecSuccess=!1),"Transaction has been canceled"==msg)msg=eval(callParent("lcm[44]")),alertType="error";else if("Action"!=calledFrom&&"Iview"!=calledFrom||-1==msg.indexOf("`"))-1!=msg.toLowerCase().indexOf("invalid")||-1!=msg.indexOf("cannot be left empty")?alertType="error":-1!=msg.toLowerCase().indexOf("is completed")||-1!=msg.toLowerCase().indexOf("saved successfully")?alertType="success":alertType="info";else{var alType=msg.split("`")[0].toLowerCase();alType.indexOf(",")>-1&&(alType=alType.split(",")[1]),"simple"==alType||""==alType?alertType="info":"warning"==alType?alertType="warning":"confirmation"==alType?alertType="success":"exceptions"==alType&&(alertType="error"),msg=msg.split("`")[1].slice(0,-1)}if(-1!=msg.indexOf("cannot be left empty")){var cutMsg=eval(callParent("lcm[45]"));msg=msg.replace("cannot be left empty",cutMsg)}if(blurDisabled=!0,"GetDep"==calledFrom&&1==IsPickListField(AxActDepFld))if(""!=msg&&""==AxPickResult){if(AxActionSave?(showAlertDialog(alertType,msg,"","","function~redirectOnSaveAction()"),disableBtnBeforeReload()):showAlertDialog(alertType,msg),errFrompickfld=msg,""!=AxActDepFld){var rowNo=GetClientRowNo(AxActiveRowNo,AxActiveDc),fldName=AxActDepFld+rowNo+"F"+AxActiveDc,focusFld=$j("#"+fldName);focusFld.length>0&&focusFld.focus()}}else currentPickList=AxActDepFld,SuccGetSearchResult(AxPickResult);else if(AxActionSave?"New"==AxActiveAction?showAlertDialog(alertType,msg):(showAlertDialog(alertType,msg,"","","function~redirectOnSaveAction()"),disableBtnBeforeReload()):showAlertDialog(alertType,msg),errFrompickfld=msg,""!=AxActiveField){var rowNo=GetClientRowNo(AxActiveRowNo,AxActiveDc),fldName=AxActiveField+rowNo+"F"+AxActiveDc,focusFld=$j("#"+fldName);focusFld.length>0&&focusFld.focus()}}}}var curFrame=$(window.frameElement);"axpiframe"===curFrame.attr("id")&&0==axFramReload&&ReloadMiddleIframe(),0!=axFramReload&&(axFramReload=!1)}function ExecFormControl(e,a){for(var t=e.length,r=0;r<t;r++){if(e[r].dc){var o,i="";i=e[r].dc,o=e[r].dcact;var l=parseInt(i.substr(2,i.length));if("hide"==o){"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(l,"hide"):ShowingDc(l,"hide");var n=$.inArray(l.toString(),VisibleDCs);-1!=n&&VisibleDCs.splice(n,1)}else if("show"==o){"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(l,"show"):ShowingDc(l,"show"),-1==$.inArray(l.toString(),VisibleDCs)&&VisibleDCs.push(l.toString())}else"disable"==o?ShowingDc(l,"Disable",a):ShowingDc(l,"Enable")}if(e[r].readonlytrans)if("no"!=e[r].readonlytrans){var s=document.getElementById("breadcrumb");if(s){var d=s.innerHTML;d=d.substring(0,d.length-11),s.innerHTML=d+" - Read Only</h3></div>"}tstReadOnly=!0,Readonlyform()}if(e[r].btnname){var c,p="";p=e[r].btnname,c=e[r].btnact;GetExactFieldName(p);var m=!1;A=null,-1!=p.indexOf(".")&&p.replace(".","\\."),"remove"==p.toLowerCase()?p="delete":"list view"==p.toLowerCase()?p="listview":"new"==p.toLowerCase()&&(p="add"),$j(":button").each(function(){$j(this).attr("id")!=p&&$j(this).attr("value")!=p||(m=!0,A=$j(this))}),m||$j(".action img").each(function(){if($j(this).attr("id")==p)return A=$j(this),m=!0,!1}),m||$j(".axpBtn").each(function(){if($j(this).attr("id")==p)return A=$j(this),m=!0,!1}),m||$j(".axpBtnCustom").each(function(){if($j(this).attr("id")==p)return A=$j(this),m=!0,!1}),m||$j("#icons").find("a").each(function(){($j(this).attr("class")==p.toLowerCase()||void 0!==p&&$j(this).text()==p)&&(A=$j(this),m=!0)}),m||$j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==p.toLowerCase()&&(A=$j(this),m=!0)}),"disable"==c?CallProcessFormControl(p,"","2",""):"enable"==c?CallProcessFormControl(p,"","1",""):(null!=A&&A.length>0?m=!0:$j("#"+p.toLowerCase()).length>0?(m=!0,A=$j("#"+p.toLowerCase())):"Save"==p?$j("#imgSaveTst")&&(m=!0,A=$j("#imgSaveTst")):(A=p+"000F0",$j("#"+A).length>0&&(m=!0,A=$j("#"+A))),m&&A.length>0&&("hide"==c?("li"==A.parent()[0].tagName.toLowerCase()&&A.parent().css({display:"none"}),"add"==p?$j("#New").length>0&&$j("#New").css({display:"none"}):("reject"==p.toLowerCase()||"approve"==p.toLowerCase())&&$j("#icons").find("a#actbtn_"+p).length>0&&$j("#icons").find("a#actbtn_"+p).parent().css({display:"none"}),A.css({display:"none"})):"show"==c?("li"==A.parent()[0].tagName.toLowerCase()&&A.parent().css({display:"inline-block"}),"add"==p&&$j("#New").length>0&&$j("#New").css({display:"inline-block"}),A.css({display:"block"})):"disable"==c?(FadeImage(A.attr("id"),1),A.attr("disabled","disabled"),A.addClass("btndis"),SetAutoCompAccess("disabled",A)):"enable"==c&&(A.prop("disabled",!1),SetAutoCompAccess("enabled",A)),m=!1))}if(e[r].fldname){var f,u,v="";v=e[r].fldname,f=e[r].fldact,u=e[r].setcaption;var g=GetFieldsRowFrameNo(v),h=GetFieldsName(v),w=g.substring(4);if("000F0"==g&&(v=v.substring(0,v.length-1)+"1"),u!=undefined&&g==v){var x=GetDcNo(v);v=IsDcGrid(x)?v+"001F"+x:v+"000F"+x}var A=$j("#"+v),b=!1;if(u!=undefined||f!=undefined){if(u!=undefined)-1==$j.inArray(GetDcNo(GetFieldsName(v))+"~"+GetFieldsName(v)+"~"+u,AxFormContSetCapFldsGrid)&&AxFormContSetCapFldsGrid.push(GetDcNo(GetFieldsName(v))+"~"+GetFieldsName(v)+"~"+u),SetCaptionFormControl(v,u);if("setfocus"==f)-1==$j.inArray(GetDcNo(v)+"~"+v+"~"+f,AxFormContFldSetFocus)&&AxFormContFldSetFocus.push(GetDcNo(v)+"~"+v+"~"+f);else if(f!=undefined){-1==$j.inArray(GetDcNo(GetFieldsName(v))+"~"+GetFieldsName(v)+"~"+f,AxFormContSetFldActGrid)&&AxFormContSetFldActGrid.push(GetDcNo(GetFieldsName(v))+"~"+GetFieldsName(v)+"~"+f)}}else if(A.length>0){if(IsDcGrid(w)&&(b=!0),"hide"==f)if(b)$j("#th-"+h).hide(),A.hide(),A.parent().hide();else{A.css("visibility","hidden");var C=GetFieldsName(v);$j("#dv"+C).hide()}else b?($j("#th-"+h).show(),A.show(),A.parent().show()):A.css("visibility","visible");"disable"==f?ProcessFormControl(v,"2",""):ProcessFormControl(v,"1","")}else{if("hide"==f||"show"==f)-1==$j.inArray(h+"~"+f,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(h+"~"+f);else if(u!=undefined){-1==$j.inArray(v+"~"+u,AxFormContSetCapFlds)&&AxFormContSetCapFlds.push(v+"~"+u)}}}}SetFormContFldActGrid("")}function ExecFormControlDesignMode(e,a){for(var t=e.length,r=0;r<t;r++)if(e[r].fldname){var o,i="";if(i=e[r].fldname,(o=e[r].setcaption)!=undefined){var l=GetFieldsRowFrameNo(i);if("000F0"==l&&(i=i.substring(0,i.length-1)+"1"),o!=undefined&&l==i){var n=GetDcNo(i);i=IsDcGrid(n)?i+"001F"+n:i+"000F"+n}-1==$j.inArray(GetDcNo(GetFieldsName(i))+"~"+GetFieldsName(i)+"~"+o,AxFormContSetCapFldsGrid)&&AxFormContSetCapFldsGrid.push(GetDcNo(GetFieldsName(i))+"~"+GetFieldsName(i)+"~"+o),SetCaptionFormControl(i,o)}}}function ConstructParams(e,a){-1!=e.indexOf("###")&&(e=e.replace(/###/g,"¿")),-1!=a.indexOf("###")&&(a=a.replace(/###/g,"¿"));e=e.split("¿");var t=a.split("¿"),r="",o=e.length;if(0!=o)for(var i=0;i<o;i++)r=r+"&"+(e[i]+"="+CheckUrlSpecialChars(t[i])).replace(/%26/g,"--.--");return r}function CheckUrlSpecialChars(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/%/g,"%25")).replace(/#/g,"%23")).replace(/&/g,"%26")).replace(/'/g,"%27")).replace(/"/g,"%22")).replace("+","%2b")).replace(/ /g,"%20")).replace(/\\/g,"%5C")).replace(/</g,"%3C")).replace(/>/g,"%3E")}function ReplaceUrlSpecialChars(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/%25/g,"%")).replace(/%26/g,"&")).replace(/%27/g,"'")).replace(/%23/g,"#")).replace(/%22/g,'"')).replace(/%2b/g,"+")).replace(/%20/g," ")).replace(/%5C/g,"\\")).replace(/%3C/g,"<")).replace(/%3E/g,">")}function closeRemodalwindow(){$j("#popupIframeRemodal",parent.document).attr("src")!=undefined&&$j(".remodal-close",parent.document).click()}function ExecCommand(cmdJsonObj,actnName,axpConfigNavType){actnName=void 0!==actnName?actnName:"";for(var popup="",pgname="",cmdName="",cmdVal="",multipleDocs,saveAction=!1,lockedBy="",parFrm=$j("#axpiframe",parent.document),curFrame=$(window.frameElement),openIviewCmdIndex=cmdJsonObj.reduce(function(e,a,t){return"openiview"==a.cmd&&e.push(t),e},[]),saveAndPopupExist=!1,i=0;i<cmdJsonObj.length;i++){try{saveAndPopupExist="action"==cmdJsonObj[i].cmd&&"save"==cmdJsonObj[i].cmdval&&cmdJsonObj.findIndex(function(e){return"pop"==e.showin})>-1,saveAndPopupExist&&eval(callParent("isSuccessAlertInPopUp")+"= true")}catch(ex){}if(!("printfile"==cmdJsonObj[i].cmd&&""!=cmdName&&""!=cmdVal&&cmdName==cmdJsonObj[i].cmd&&cmdVal==cmdJsonObj[i].cmdval||"openiview"==cmdJsonObj[i].cmd&&openIviewCmdIndex.length>0&&openIviewCmdIndex[0]!=i||saveAndPopupExist))if(cmdName=cmdJsonObj[i].cmd,cmdVal=cmdJsonObj[i].cmdval,multipleDocs=cmdJsonObj[i].multiprintdocs,cmdJsonObj[i].lockedby&&(lockedBy=cmdJsonObj[i].lockedby),"openfile"==cmdName||"printfile"==cmdName){var docID,fldPath;UpdateExceptionMessageInET("Action printfile/openfile result. Command name:"+cmdName+" Command Val:"+cmdVal);var filepath="",compressValue="",dirName="";cmdVal=CheckUrlSpecialChars(cmdVal);var fldPrintDirective=GetFieldValue("axp_printdirective000F1");""!=fldPrintDirective&&(fldPath=fldPrintDirective.split("~"),compressValue=fldPath[0].toString(),docID=GetFieldValue(fldPath[1]+"000F1"),(docID=undefined)&&(docID=""),fldPath.length>2&&(filepath=fldPath[2].toString()));var left=screen.width/2-200,top=screen.height/2-100;if(saveAction&&(void 0===cmdVal||""==cmdVal)){setTimeout(function(){showAlertDialog("warning","Transaction saved successfully and there is an error while print. kindly load record from listview and print again.")},10);continue}if("yes"==multipleDocs){dirName=cmdJsonObj[i].directory;var na="./OpenFiles.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}var windobj=window.open(na,"_blank");windobj.focus(),windobj.close()}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else try{if(cmdVal.toLowerCase().indexOf("pdf")>-1){dirName="PDF",compressValue=compressValue||"";var isAttPDF="F";if(isAttPDF=cmdJsonObj[i].isatt,"true"==compressValue.toLowerCase()){var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}var windobj=window.open(na,"_blank");windobj.focus()}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if("T"==isAttPDF){isSelfOpened=!0,cmdVal==undefined&&(cmdVal=""),compressValue==undefined&&(compressValue=""),filepath==undefined&&(filepath=""),docID==undefined&&(docID=""),dirName==undefined&&(dirName="");var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName+"&Imp=t",curWin;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}"function"==typeof fixUnloadOnWindowSelfDownloads&&fixUnloadOnWindowSelfDownloads(window),curWin=window.open(na,"_self")}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),"function"==typeof BeforeWindowClose&&(window.onbeforeunload=BeforeWindowClose)}}else if(1==cmdJsonObj.length)if(iframeindex>-1&&null!=iframeindex){var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}var windobj=window.open(na,"axpiframe");windobj.focus(),window.parent.closeFrame()}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),window.parent.closeFrame(),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if("printfile"==cmdJsonObj[0].cmd)OpenPdfFile(cmdVal,filepath,docID,dirName,saveAction);else{var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(","),winobj=window.open(na,"",params);winobj.moveTo(0,0),winobj.focus()}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if(cmdJsonObj.filter(function(e){return"printfile"===e.cmd}).length>0)OpenPdfFile(cmdVal,filepath,docID,dirName,saveAction);else if(3==cmdJsonObj.length&&"action"==cmdJsonObj[0].cmd&&"openfile"==cmdJsonObj[2].cmd)OpenPdfFile(cmdVal,filepath,docID,dirName,saveAction);else{var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(","),winobj=window.open(na,"",params);winobj.moveTo(0,0),winobj.focus()}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}}else{isSelfOpened=!0,cmdVal==undefined&&(cmdVal=""),compressValue==undefined&&(compressValue=""),filepath==undefined&&(filepath=""),docID==undefined&&(docID=""),dirName==undefined&&(dirName="");var na="./openfile.aspx?fpath="+cmdVal+"&compress="+compressValue+"&path="+filepath+"&docid="+docID+"&dirName="+dirName+"&Imp=t",curWin;try{try{var tempUrl=axSetTstructPrint({obj:cmdJsonObj[i],url:na,multipleDocs:multipleDocs,fileName:cmdVal,compressValue:compressValue,filepath:filepath,docID:docID,dirName:dirName,isAttPDF:isAttPDF})||na;if(!0===tempUrl)continue;na=tempUrl}catch(ex){}"function"==typeof fixUnloadOnWindowSelfDownloads&&fixUnloadOnWindowSelfDownloads(window),curWin=window.open(na,"_self")}catch(ex){UpdateExceptionMessageInET("openfile exception : "+ex.message),"function"==typeof BeforeWindowClose&&(window.onbeforeunload=BeforeWindowClose)}}}catch(ex){UpdateExceptionMessageInET("openfile/printfile outer exception : "+ex.message),1==saveAction?showAlertDialog("warning","Transaction saved successfully and there is an error while print. kindly load record from listview and print again."+ex.message):showAlertDialog("warning",ex.message);continue}}else if("recordlocked"==cmdName){AxIsTstructLocked=cmdVal;var cutMsg=eval(callParent("lcm[46]"));ShowInfoDialog(cutMsg+" - "+lockedBy),"admin"==user&&$("#dvMessage table tr").append('<a href="javascript:void(0)" id="lnkUnlockTstruct" onclick="javascript:forceUnlockTstruct();" title="Unlock" class="handCur">Unlock</a>').find("td").width("100%")}else if("done"==cmdName)showAlertDialog("success",2026,"client");else if("new"==cmdName)try{if(UpdateExceptionMessageInET("Action new result. Command name:"+cmdName+" Command Val:"+cmdVal),AxActiveAction="New",GetFldSetCarryValue(),SetCarryFlds.length>0){var querySCFld="";SetCarryFlds.forEach(function(e){var a=e.split("♠")[0];a=a.substring(0,a.lastIndexOf("F")-3);var t=e.split("♠")[1];querySCFld+="&"+a+"="+t}),querySCFld+="&act=open",AvoidPostBackAfterSave("tstruct.aspx?transid="+transid+querySCFld)}else AvoidPostBackAfterSave("tstruct.aspx?transid="+transid)}catch(ex){UpdateExceptionMessageInET("Command new exception : "+ex.message)}else if("close"==cmdName)closeRemodalwindow();else if("refreshpage"==cmdName)try{var url="./tstruct.aspx?&transid="+tst;window.document.location.href=url,"axpiframe"===curFrame.attr("id")&&(axFramReload=!0,ReloadMiddleIframe())}catch(ex){window.document.location.href=window.document.location.href}else if("refreshparent"==cmdName)window.opener.location.reload();else if("refresh"==cmdName){SetSession({key:"IsFromChildWindow",val:"true"}),iViewRefresh=!0;var localIviewName=findGetParameter("ivname",window.document.location.href);if(null!=localIviewName)try{var historyIviewLink=callParentNew("appLinkHistory")[callParentNew("curPageIndex")],historyIviewName=findGetParameter("ivname",historyIviewLink);window.document.location.href=null!=historyIviewName&&historyIviewName==localIviewName?historyIviewLink:window.document.location.href}catch(ex){window.document.location.href=window.document.location.href}else window.document.location.href=window.document.location.href}else if("canceled"==cmdName){if("no"!=cmdVal){var canReason=cmdJsonObj[i].reason;ShowInfoDialog(cancelMsg+" "+canReason),tstructCancelled="Cancelled",Readonlyform();var imgSave=$j("#imgSaveTst");imgSave.length>0&&(imgSave.prop("disabled",!0),imgSave.attr("disabled","disabled"),imgSave.css("cursor","default"));var btnSave=$j("#btnSaveTst");btnSave.length>0&&btnSave.attr("disabled","disabled")}}else if("opentstruct"==cmdName||"clear"==cmdName){var tstid=cmdVal;"clear"==cmdName&&(tstid=transid);var popname="openPop"+tstid;popup=cmdJsonObj[i].showin;var tparams="";cmdJsonObj[i].pname&&(tparams=ConstructParams(cmdJsonObj[i].pname,cmdJsonObj[i].pvalue));var designParam="";if(actnName.startsWith("axpdesign_")&&(designParam="&theMode=design"),axpConfigNavType!=undefined&&""!=axpConfigNavType||!parFrm.hasClass("frameSplited")?axpConfigNavType&&""!=axpConfigNavType&&(popup="split"==axpConfigNavType?"split":"popup"==axpConfigNavType?"pop":"newpage"==axpConfigNavType?"newpage":""):popup="split","pop"==popup){tparams+="&AxPop=true";var openpopup="tstruct.aspx?act=open&transid="+tstid+tparams+designParam;createPopup(openpopup)}else if("newpage"==popup)popupFullPage("tstruct.aspx?act=open&transid="+tstid+tparams+designParam);else if("split"!=popup){var redirectionLink="tstruct.aspx?act=open&transid="+tstid+tparams+designParam,customCalled=!1;try{customCalled=loadInMiddle1(redirectionLink)}catch(ex){}customCalled||(window.document.location.href=redirectionLink)}else"split"==popup&&callParentNew("OpenOnPropertyBase(".concat("tstruct.aspx?act=open&transid="+tstid+tparams+designParam,")"),"function")}else if("loadtstruct"==cmdName){var tstid=cmdVal,popname="loadPop"+tstid;popup=cmdJsonObj[i].showin;var tparams="";if(cmdJsonObj[i].pname&&(tparams=ConstructParams(cmdJsonObj[i].pname,cmdJsonObj[i].pvalue)),axpConfigNavType!=undefined&&""!=axpConfigNavType||!parFrm.hasClass("frameSplited")?axpConfigNavType&&""!=axpConfigNavType&&(popup="split"==axpConfigNavType?"split":"popup"==axpConfigNavType?"pop":"newpage"==axpConfigNavType?"newpage":""):popup="split","pop"==popup){tparams+="&AxPop=true";var loadpopup="tstruct.aspx?act=load&transid="+tstid+tparams;createPopup(loadpopup)}else"newpage"==popup?popupFullPage("tstruct.aspx?act=load&transid="+tstid+tparams):"split"!=popup?window.document.location.href="tstruct.aspx?act=load&transid="+tstid+tparams:"split"==popup&&callParentNew("OpenOnPropertyBase(".concat("tstruct.aspx?act=load&transid="+tstid+tparams,")"),"function")}else if("openiview"==cmdName){var ivn=cmdJsonObj[i].cmdval,popname="ivewPop"+ivn;popup=cmdJsonObj[i].showin;var tparams="";if(cmdJsonObj[i].pname){try{tparams=ConstructParams(cmdJsonObj[i].pname,cmdJsonObj[i].pvalue)}catch(ex){}"Iview"!=document.title&&(tparams+=(tparams?"&":"")+"AxIvNav=true")}if($j("#axp_ivname000F1").length>0&&(ivn=$j("#axp_ivname000F1").val()),axpConfigNavType!=undefined&&""!=axpConfigNavType||!parFrm.hasClass("frameSplited")?axpConfigNavType&&""!=axpConfigNavType&&(popup="split"==axpConfigNavType?"split":"popup"==axpConfigNavType?"pop":"newpage"==axpConfigNavType?"newpage":""):popup="split","pop"==popup){var pop="true";tparams+="&AxIsPop=true";var loadpopup="ivtoivload.aspx?ivname="+ivn+"&"+tparams,popname;createPopup(loadpopup)}else if("newpage"==popup)popupFullPage("ivtoivload.aspx?ivname="+ivn+"&"+tparams);else if("split"!=popup){var loadMiddle1URL="ivtoivload.aspx?ivname="+ivn+"&"+tparams;try{"middle1"==window.frameElement.id&&callParentNew("middle1URL=",loadMiddle1URL)}catch(ex){}var srcUrl="ivtoivload.aspx?ivname="+ivn+"&AxIvNav=true",linkParams=tparams;linkParams=linkParams.replace(/~/g,"="),linkParams=linkParams.replace(/¿/g,"&"),linkParams=ReplaceUrlSpecialChars(linkParams),""!=linkParams&&(setIviewNavigationData(linkParams,ivn),callParentNew("updateAppLinkObj("+srcUrl+",1)","function")),window.document.location.href=srcUrl}else"split"==popup&&callParentNew("OpenOnPropertyBase(".concat("ivtoivload.aspx?ivname="+ivn+"&"+tparams,")"),"function")}else if("openpage"==cmdName){pgname=cmdVal;var tparams="";cmdJsonObj[i].pname&&(tparams=ConstructParams(cmdJsonObj[i].pname,cmdJsonObj[i].pvalue)),""!=pgname&&pgname.toLowerCase().startsWith("pagets")?(pgname=pgname.substring(6),window.document.location.href="tstruct.aspx?act=open&transid="+pgname+tparams):""!=pgname&&pgname.toLowerCase().startsWith("pageiv")&&(pgname=pgname.substring(6),window.document.location.href="ivtoivload.aspx?ivname="+pgname+"&"+tparams)}else if("openpdf"==cmdName){var pdfpath=cmdVal,len=pdfpath.length,filepos=InStrPath(pdfpath)+1;pdfpath=pdfpath.substring(filepos,len),window.location.href="../"+pdfpath}else if("pageload"==cmdName||"loadpage"==cmdName){pgname=cmdVal;var tparams="";cmdJsonObj[i].pname&&(tparams=ConstructParams(cmdJsonObj[i].pname,cmdJsonObj[i].pvalue)),""!=pgname&&pgname.toLowerCase().startsWith("pagets")?(pgname=pgname.substring(6),window.document.location.href="tstruct.aspx?act=load&transid="+pgname+tparams):""!=pgname&&pgname.toLowerCase().startsWith("pageiv")&&(pgname=pgname.substring(6),window.document.location.href="ivtoivload.aspx?ivname="+pgname+"&"+tparams)}else if("action"==cmdName&&"save"==cmdVal)saveAction=!0,AxActionSave=!0;else if("recid"==cmdName){if(1==saveAction){UpdateExceptionMessageInET("Action save result. Command Val:save RecordId:"+cmdVal),$j("#recordid000F0").val(cmdVal);var recIdVal=$j("#recordid000F0").val();"0"!=recIdVal&&(saveActRecSuccess=!0,eval(callParent("isSuccessAlertInPopUp")+"= true"),"axpiframe"===curFrame.attr("id")&&(axFramReload=!0,ReloadMiddleIframe()))}}else if("newtrans"==cmdName)$j("#recordid000F0").val("0"),recordid="0";else if("filepath"==cmdName)try{var curWin;try{"function"==typeof fixUnloadOnWindowSelfDownloads&&fixUnloadOnWindowSelfDownloads(window),curWin=window.open("download.aspx","_self","width=400,height=300,scrollbars=yes,resizable=yes")}catch(ex){"function"==typeof BeforeWindowClose&&(window.onbeforeunload=BeforeWindowClose)}}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}else"copytrans"==cmdName&&"true"==cmdVal&&($j("#recordid000F0").val("0"),recordid="0")}}function forceUnlockTstruct(){var e=$j("#recordid000F0").val();if("0"!=e&&AxIsTstructLocked&&callParentNew("isLockOnRead")){try{ASB.WebService.UnlockTStructRecord(tst,e,!0,function(e,a){location.reload()})}catch(a){}}}function redirectOnSaveAction(){var e=$j("#recordid000F0").val(),a="";void 0!==callParentNew("axpiframe","id")&&(a="&AxSplit=true"),""==e||"0"==e?(GetProcessTime(),window.location.href="tstruct.aspx?act=load&transid="+tst+a+"&hdnbElapsTime="+callParentNew("browserElapsTime")):"axcal"==transid?(callParentNew("isSuccessAlertInPopUp=",!0),callParentNew("closeModalDialog()","function")):(saveActRecSuccess=!0,AxIsTstructCached?SaveInCache(e,"SaveAction"):(GetProcessTime(),window.location.href="tstruct.aspx?act=load&transid="+tst+"&recordid="+e+a+"&hdnbElapsTime="+callParentNew("browserElapsTime")))}function SetRows(e,a,t,r,o,i){AxActiveDc=e;var l=GetDcRowCount(e);a=parseInt(a,10);var n=$j(".wrapperForGridData"+e+" tbody tr").length,s=!1;if(TstructHasPop&&(s=IsDcPopGrid(e))&&"GetDep"==r){for(var d=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(","),c=new Array,p=0;p<d.length;p++)c.push(d[p]);c.sort()}if(""!=t){var m;m=t.split(",");for(var f=0;f<m.length;f++){var u=m[f].substring(0,1),v=m[f].substring(1);if("d"==u)if("*"==v){GetDcRowCount(e);"no"!=i&&SetRowsInDc(e,l,r)}else DeleteDbRow(e,v,r);else if(TstructHasPop){var g=$j.inArray(e,DCFrameNo);"LoadData"!=r&&("GetDep"!=r||0!=n)||"0"==$j("#recordid000F0").val()&&"True"!=DCHasDataRows[g]?"i1"!=m[f].toString()||s&&"GetDep"==r&&"True"==o?(AddRow(e,r),AxDepRows.push(v+"~"+GetDcRowCount(e))):(AxDepRows.push(v+"~1"),1==s?"LoadData"!=r&&($j("#sp"+e+"R001F"+e).show(),UpdateNewPopInfo(e,"001"),UpdatePopUpArrays(e,"001",!0,"Add"),UpdateDcRowArrays(e,"001","Add")):(UpdatePopUpArrays(e,"001",!1,"Add"),UpdateDcRowArrays(e,"001","Add"))):"no"!=i&&(axInlineGridEdit?addNewInlineGridRow(e,r):AddNewRowInDc(e,r))}else{g=$j.inArray(e,DCFrameNo);"LoadData"!=r&&("GetDep"!=r||0!=n)||"0"==$j("#recordid000F0").val()&&"True"!=DCHasDataRows[g]?"i1"!=m[f].toString()&&""!=m[f].toString()||"i1"==m[f].toString()&&-1!=t.indexOf("i2")?axInlineGridEdit?addNewInlineGridRow(e,r):axInlineGridEdit||"form"!=AxpGridForm?AddNewRowInDc(e,r):AddNewFormRowInDc(e,r):"GetDep"!=r&&"Action"!=r||"i1"!=m[f].toString()||-1!=t.indexOf("i2")||-1==t.indexOf("d*")||"yes"!=i||(axInlineGridEdit?addNewInlineGridRow(e,r):axInlineGridEdit||"form"!=AxpGridForm?AddNewRowInDc(e,r):AddNewFormRowInDc(e,r),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(a){a.split("~")[0]==e&&gridDummyRowVal.splice($.inArray(a,gridDummyRowVal),1)})):"GetDep"==r&&"i1"==m[f].toString()&&-1==t.indexOf("i2")&&"False"==DCHasDataRows[g]||"no"!=i&&(axInlineGridEdit?addNewInlineGridRow(e,r):axInlineGridEdit||"form"!=AxpGridForm?AddNewRowInDc(e,r):AddNewFormRowInDc(e,r))}}ResetSerialNo(e,"000F"+e,a,!0),swicthCompressMode("#divDc"+e)}}function DeletePopRows(e,a){for(var t=0;t<PopGridDcNo.length;t++)if(PopGridDcNo[t]==e){for(var r=PopRows[t].toString().split(","),o="",i=0;i<r.length;i++)r[i]!=a&&(""==o?o=r[i]:o+=","+r[i]);PopRows[t]=o}}function DeleteDbRow(e,a,t){var r=GetClientRowNo(a,e);if(IsSingleRow(e))"LoadData"!=t&&ClearDeletedFields(e,r);else{if(UpdateChangedDbRow(e,a,"Delete"),DeleteRowHtml(e,r),TstructHasPop)1==IsDcPopGrid(e)&&(DeletePopRows(e,r),"1"==a&&UpdatePopUpArrays(e,"001",!0,"Delete"));var o=GetDcRowCount(e);o=parseInt(o,10)-1,SetRowCount(e,o);var i=GetSerialNoCnt(e);i=parseInt(i,10)-1,SetSerialNoCnt(e,i)}}function UpdateChangedDbRow(e,a,t,r){for(var o=!1,i=-1,l=0;l<RowDcNo.length;l++)if(RowDcNo[l]==e&&DbRowNo[l]==a){i=l,o=!0;break}"Delete"==t?o&&-1!=i&&(RowDcNo.splice(i,1),DbRowNo.splice(i,1),ClientRowNo.splice(i,1),ResetDbRowNo(e,a,t)):o&&-1!=i&&(RowDcNo.insert(i,e),DbRowNo.insert(i,a),ClientRowNo.insert(i,r),ResetDbRowNo(e,a,t))}function DeleteRowHtml(e,a){$j("#sp"+e+"R"+a+"F"+e).remove()}function SetRowsInDc(e,a,t){if($j("#hdnRCntDc"+e).length>0){if(("LoadData"==t&&a>0?parseInt(a,10):axInlineGridEdit?a:parseInt(a,10)-1)>0)ClearRowsInGrid(e,t);else{var r=GetClientRowNo("1",e);ClearDeletedFields(e,r,"",!0)}}}function ClearRowsInGrid(e,a){document.getElementById("Frame"+e);var t=0;if(t=GetDcRowCount(e),t=parseInt(t,10),"LoadData"==a?t+=1:t=axInlineGridEdit?t+1:t,t>=1){for(var r=t-1;r>=1;r--){var o=GetClientRowNo(r,e),i=o+"F"+e,l="sp"+e+"R"+o+"F"+e;$j("tr#"+l).length>0?($j("tr#"+l).hasClass("inEditMode")&&$j("#editCancelButton"+e).click(),$j("tr#"+l).remove()):$j("div#"+l).hasClass("editWrapTr"),UpdateDcRowArrays(e,o,"Delete");for(var n=0;n<RowDcNo.length;n++)RowDcNo[n]==e&&parseInt(ClientRowNo[n],10)==r+1&&(r==t-1&&IsRowDupInDcArray(e,"001")?(ClientRowNo[n]="001",UpdateDcRowArrays(e,ClientRowNo[n],"Delete")):r==t-1&&(ClientRowNo[n]="001"));for(var s=GetGridFields(e),d=0;d<s.length;d++){var c=s[d]+i;RemoveDeletedFields(c)}}var p=GetClientRowNo("1",e);UpdateDcRowArrays(e,p,"Delete"),UpdateDcRowArrays(e,"001","Add");var m=GetGridFields(e);for(r=0;r<m.length;r++){c=m[r]+"001F"+e;CallSetFieldValue(c,"")}}changeEditLayoutIds(0,e),SetRowCount(e,"1",undefined,a),SetSerialNoCnt(e,"1")}function IsRowDupInDcArray(e,a){for(var t=0,r=0;r<RowDcNo.length;r++)RowDcNo[r]==e&&ClientRowNo[r]==a&&t++;return t>1}function ConstructFieldName(e,a,t){return e+GetClientRowNo(t,a)+"F"+a}function GetFirstRow(e){new Array;return GetDcClientRows(e).getMinVal()}function CopyFromMasterRow(e,a,t,r,o,i){var l=GetFieldsName(e),n="";if(IsDcGrid(a)){if(-1!=GetFormatGridIndex(a)){if(o&&""!=o){var s="gridDc"+a,d=GetFormatRowIndex(s,a,o,"header"),c=$j("#"+s+" tbody>tr:eq("+(d+1)+")").attr("id"),p=c.lastIndexOf("F");t=c.substring(p-3,p)}}else t=GetFirstRow(a);n=l+GetRowNoHelper(t)+"F"+a;var m=$j("#"+e);if("select-one"==m.attr("type")||"select-one"==m.prop("type")){$j("#"+e+" option").length>0&&$j("#"+e+" option").remove(),$j("#"+n+" option").each(function(){var a=$j(this);$j("#"+e).append($j("<option>",{value:a.val(),text:a.text()}))});var f=$j("#"+n)[0].selectedIndex;if(2==$j("#"+e+" option").length){var u=$j.inArray(l,FNames);"True"==FldAutoSelect[u]&&1==f?$j("#"+e)[0].selectedIndex=1:$j("#"+e)[0].selectedIndex=0}else $j("#"+e)[0].selectedIndex=0;i==undefined&&(i=IsDcPopGrid(a)),RedrawField(e,r,i)}else $j("#"+e).hasClass("fldFromSelect")||$j("#"+e).hasClass("fldmultiSelect")||$j("#"+e).val($j("#"+n).val())}}function DoFormControlPrivilege(e,a){if("Approved"!=appstatus&&"Rejected"!=appstatus){var t,r;if(t=GetFieldsRowNo(e),r=GetFieldsDcNo(e),null!=e&&e!=undefined&&-1!=e.indexOf("axpvalid")&&""!=a&&a!=undefined){var o=a.toString().toUpperCase();if("B"==o)DisableDeleteBtn("del"+t+"F"+r,o);else if("A"==o)DisableDeleteBtn("del"+t+"F"+r,o);else if("C"==o){DisableDeleteBtn("del"+t+"F"+r,o);for(var i=GetGridFields(r),l=0;l<i.length;l++){e=i[l]+t+"F"+r;(n=$j("#"+e)).length>0&&n.prop("disabled",!0),$j("#sp"+r+"R"+t+"F"+r).find(".pickimg").each(function(){$j(this).prop("disabled",!0),$j(this).css("cursor","default")})}}else if("D"==o){DisableDeleteBtn("del"+t+"F"+r,o);for(i=GetGridFields(r),l=0;l<i.length;l++){var n;e=i[l]+t+"F"+r;(n=$j("#"+e)).length>0&&n.prop("disabled",!0),$j("#sp"+r+"R"+t+"F"+r).find(".pickimg").each(function(){$j(this).prop("disabled",!0),$j(this).css("cursor","default")})}}DisNewGridDelBtn(r,t,o)}}}function DisNewGridDelBtn(e,a,t){try{"B"==t||"C"==t?($("#sp"+e+"R"+a+"F"+e+" td:first").find(".glyphicon.glyphicon-remove icon-arrows-remove").addClass("disabled").prop("disabled",!0),$("#sp"+e+"R"+a+"F"+e+" td:first").find(".glyphicon.glyphicon-trash").addClass("disabled").prop("disabled",!0),"C"==t&&$("#sp"+e+"R"+a+"F"+e+" td:first").find(".glyphicon.glyphicon-pencil.icon-software-pencil").addClass("disabled").prop("disabled",!0)):"D"==t&&($("#sp"+e+"R"+a+"F"+e+" td:first").find(".glyphicon.glyphicon-trash").removeClass("disabled").prop("disabled",!1),$("#sp"+e+"R"+a+"F"+e+" td:first").find(".glyphicon.glyphicon-trash").parent().removeClass("disabled").prop("disabled",!1))}catch(r){}}function DisableDeleteBtn(e,a){delImg=$j("#"+e),delImg.length>0&&($j(this).prop("disabled",!0),delImg.css("cursor","default"),"C"==a||"B"==a?(delImg.addClass("disabledelete"),delImg.unbind("click")):(delImg.removeClass("disabledelete"),delImg.bind("click")))}function AttachFiles(){tstReadOnly||$j("#attachment-overlay").removeClass("d-none")}function callAfterFileAttach(){var e=$j("#attachfname").val();SetFormDirty(!0),FindDuplicate(e)?showAlertDialog("warning",2027,"client"):(filenamearray.push(e),ConstructAttachments())}function ConstructAttachments(){var e=0,a=0;if($j("#recordid000F0").length>0&&(a=$j("#recordid000F0").val()),fileonloadarray.length>0)for(var t=0;t<fileonloadarray.length;t++){var r='"'+fileonloadarray[t].toString()+'"';e=parseInt(t,10)+1,0==t?'<div class="row attachmentData"><div class="col-md-4 col-sm-6"><div class="attachments"><a class=\'linkrem\' alt=\'Remove File\' onclick=\'javascript:RemoveFile('+r+","+a+");'><img  class='close pull-right' src='../axpimages/icons/16x16/cross.png' alt='delete' /></a>&nbsp;<a id=loadattach"+e+' class="pull-left Attachlink flagcount" style="cursor:pointer;" onclick=\'javascript:OpenAttachment('+r+","+a+");'>"+fileonloadarray[t].toString()+"</a></div></div>":"<div class=\"col-md-4 col-sm-6\"><div class=\"attachments\"><a class='linkrem' alt='Remove File' onclick='javascript:RemoveFile("+r+","+a+");'><img class='close pull-right' src='../axpimages/icons/16x16/cross.png' alt='delete' /></a>&nbsp;<a id=loadattach"+e+' class="pull-left Attachlink flagcount" style="cursor:pointer;" onclick=\'javascript:OpenAttachment('+r+","+a+");'>"+fileonloadarray[t].toString()+"</a></div></div>"}if(filenamearray.length>0){for(var o=0;o<filenamearray.length;o++){r='"'+(r=CheckUrlSpecialChars(r=filenamearray[o].toString()))+'"';0==e?(e=1,'<div class="row attachmentData"><div class="col-md-4 col-sm-6"><div class="attachments"> <a class="pull-left Attachlink flagcount"  id=loadattach" + attcount + " style="cursor:pointer;" onclick=\'javascript:OpenAttachment('+r+","+a+(a>0?",true":"")+" );' >"+filenamearray[o].toString()+"</a> <a class=linkrem alt=Remove File onclick='javascript:RemoveNewFiles("+r+');\'> <img class="close pull-right" src="../axpimages/icons/16x16/cross.png"  alt=""> </a><div class="clear"></div></div></div>'):(e=parseInt(e,10)+1,'<div class="col-md-4 col-sm-6"><div class="attachments"> <a class="pull-left Attachlink flagcount"  id=loadattach" + attcount + " style="cursor:pointer;"  onclick=\'javascript:OpenAttachment('+r+","+a+(a>0?",true":"")+");' >"+filenamearray[o].toString()+"</a> <a class=linkrem alt=Remove File onclick='javascript:RemoveNewFiles("+r+');\'> <img class="close pull-right" src="../axpimages/icons/16x16/cross.png"  alt=""> </a><div class="clear"></div></div></div>')}"</div>"}if("<input id=hdncount type=hidden value="+e+">",e>0&&$j("#attachment-overlay").removeClass("d-none"),-1!=GetFieldIndex("axp_attachedfiles")){var i=GetActualFieldName("axp_attachedfiles"),l=filenamearray.join(","),n=GetFieldsDcNo(i),s=GetDbRowNo(GetFieldsRowNo(i),n);GetFieldsRowNo(i);UpdateFieldArray(i,s,l,"parent"),CallSetFieldValue(i,l)}}function RemoveNewFiles(e){e=ReplaceUrlSpecialChars(e);try{ASB.WebService.RemoveNewFiles(e,sid)}catch(a){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}RemoveArrVal(e,filenamearray),$j("#attachment-overlay").hide(),ConstructAttachments(),adjustwin("100",window)}var attFileName="",delFiles="";function RemoveFile(fname,rid,delFileObj){if("undefined"==typeof tstructCancelled||"cancelled"!==tstructCancelled.toLowerCase()){delFiles=delFileObj,attFileName=ReplaceUrlSpecialChars(fname);var cutMsg=eval(callParent("lcm[47]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var RemoveFileCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){RemoveFileCB.close(),RemoveFileAfterConfirm()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}else showAlertDialog("warning",eval(callParent("lcm[303]")));function RemoveFileAfterConfirm(){var e='<root axpapp="'+proj+'"  sessionid="'+sid+'"  filename="'+fname+'" transid="'+tst+'"  recordid="'+rid+'"   trace="'+trace+'">';try{ASB.WebService.RemoveAttachment(e,tstDataId,SuccessRemAttFile)}catch(a){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}}function SuccessRemAttFile(e,a){if(!CheckSessionTimeout(e)){var t=$j.parseJSON(e);if(t.message){var r=t.message[0].msg;if("done"==r){RemoveArrVal(attFileName,fileonloadarray);var o=document.querySelector("#attachment-overlay");Dropzone.forElement(o).removeFile(delFiles),SetFormDirty(!0)}else showAlertDialog("error",r)}}}function RemoveArrVal(e,a){for(var t=0;t<a.length;t++)if(e==a[t]){a.splice(t,1);break}}function OpenAttachment(e,a,t){e=ReplaceUrlSpecialChars(e);var r='<root axpapp="'+proj+'"  sessionid="'+sid+'"  filename="'+e+'" transid="'+tst+'"  recordid="'+a+'"   trace="♦♦GetAttachedFile♦">';try{var o=$j(".attachmentData a").length/2;if(0==a||""==a||$j(".attachmentData .flagcount").length!=o||t){var i='{"command":[{"cmd":"openfile","cmdval":';SuccChoicesOpenAtt(i=i+'"'+e+'","isatt":"T"}]}',null)}else ASB.WebService.ViewAttachment(r,tstDataId,SuccChoicesOpenAtt)}catch(l){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}function SuccChoicesOpenAtt(e,a){CheckSessionTimeout(e)||AssignLoadValues(e,"")}function FindDuplicate(e){for(var a=0;a<fileonloadarray.length;a++)if(e==fileonloadarray[a])return!0;for(var t=0;t<filenamearray.length;t++)if(e==filenamearray[a])return!0;return!1}function EvalPrepared(fldName,rowNo,exprStr,exprType){""!=exprStr&&(exprStr=exprStr.replace(/♦/g,","));var fName=GetFieldsName(fldName);wordlist=new Array;var fldIdx=$j.inArray(fName,FNames),posStr="";-1!=fldIdx&&(posStr=ExprPosArray[fldIdx]);var estr=CheckEval(exprStr,rowNo);estr!=exprStr&&(posStr=""),exprStr=estr,""==posStr&&(posStr=PrepareExpression(fName,exprStr,exprType),ExprPosArray[fldIdx]=posStr),wordlist=new Array;var startPos=posStr.toString().substring(0,posStr.toString().indexOf(",")),endPos=posStr.toString().substring(posStr.toString().indexOf(",")+1);startPos=parseInt(startPos,10),endPos=parseInt(endPos,10);for(var i=startPos;i<=endPos;i++){var strExp=EWords[i],ch=strExp.split(""),firstchar=ch[0];if("v"==firstchar){var fName=strExp.substring(1),fldVal=PrepareField(fName,rowNo);strExp=fldVal}else if("c"==firstchar){var fName=strExp.substring(1);fName=GetExactFieldName(fName),strExp="c"+fName}wordlist.push(strExp)}for(var fun=!0,i=0;i<wordlist.length;i++)"sFIELDCHANGED"!=wordlist[i]&&"sfieldchanged"!=wordlist[i].toString().toLowerCase()||(fun=!1);if(fun){EvalFun();var s=GetExprString();if(""==s)return"";try{var res=eval(s)}catch(ex){try{var res=eval("'"+s+"'")}catch(exp){res=""}}return"Infinity"==res&&(res=0),res}return!0}function PrepareField(e,a){var r="",o="";if("activerow"==e.toString().toLowerCase())r=GetClientRowNo(AxActiveRowNo,AxActiveDc);else if("activeprow"==e.toString().toLowerCase())r=GetClientRowNo(AxActivePRow,AxActivePDc);else{var i=GetDcNo(e);if(e=GetExactFieldName(e),o=IsDcGrid(i)?e+GetClientRowNo(a,i)+"F"+i:e+"000F"+i,document.getElementById(o))chrstate=!1,o=o;else{chrstate=!1;i=GetDcNo(e);if(o=IsDcPopGrid(i)?e+GetClientRowNo(AxActiveRowNo,AxActiveDc)+"F"+AxActiveDc:TstructHasPop&&IsDcParentGrid(i)?""!=AxActivePRow&&""!=AxActivePDc?e+GetClientRowNo(AxActivePRow,AxActivePDc)+"F"+AxActivePDc:e+GetClientRowNo(AxActiveRowNo,AxActiveDc)+"F"+AxActiveDc:IsDcGrid(i)&&"000"==a?e+GetClientRowNo(AxActiveRowNo,i)+"F"+i:e+a+"F"+i,document.getElementById(o))o=o;else{-1!=$j.inArray(e,FNames)?fldv="":r=e;for(var l=0;l<varlist.length;l++)if(r==varlist[l].toLowerCase()){chrstate=!0;var n=(r=valuelist[l]).split("/");2==n[0].length&&"undefined"!=typeof n[1]&&2==n[1].length&&"undefined"!=typeof n[2]&&4==n[2].length?s="d"+r:isNaN(r)?r="s"+r:(""==r&&(r=0),1==(r="n"+(r=r)).length&&(r="n0"))}}}if(!chrstate)if(document.getElementById(o)){r=GetFieldValue(o),e==AxAutoGenFld&&"Auto"==r&&(r="");var d=$j.inArray(e,FNames),c="";-1!=d&&(c=FDataType[d].toString()),""!=c?"Date/Time"==c?r="d"+r:"Character"==c?r="s"+r:(r.length>3&&-1!=r.indexOf(",")&&(r=removeCommas(r)),""==r&&(r=0),1==(r="n"+r).length&&(r="n0")):isNaN(r)?r="s"+r:(r.length>3&&-1!=r.indexOf(",")&&(r=removeCommas(r)),""==r&&(r=0),1==(r="n"+r).length&&(r="n0"))}else o=e,""!=r&&(isNaN(r)?t="s":t="n",r=t+r)}for(var p=0;p<funclist.length;p++)if(o.toLowerCase()==funclist[p].toString().toLowerCase()){r="f"+funclist[p],chrstate=!0;break}return r}function CheckSpecialCharInGlobalVar(e){return e=e.replace(/;bkslh/g,"\\")}function PrepareExpression(e,a,t){expressiontype=t;var r=0;varlist=new Array,valuelist=new Array,wordlist=new Array;var o=0;expFldname=e;transid,e.lastIndexOf("F");var i=a;if(Parameters.length>1)for(var l=0;l<Parameters.length;l++){var n=Parameters[l].toString();n=n.split("~"),varlist[o]=n[0].toString(),valuelist[o]=CheckSpecialCharInGlobalVar(n[1].toString()),o++}varlist[o]="activerow",valuelist[o]=AxActiveRowNo;new Array,new Array;i=TrimAll(i);for(var d=(i+=" ").split(""),c=0;c<d.length;c++){if("{"!=d[c])if("}"!=d[c])if(constword)wordstring+=d[c];else if((isDelimiter(d[c])||isOperator(d[c]))&&(""!=wordstring&&(wordstring="v"+wordstring,wordlist[r]=wordstring,r++),wordstring=""),"("!=d[c])")"!=d[c]?isOperator(d[c])?(wordlist[r]="o"+d[c],r++):" "!=d[c]&&(","!=d[c]?wordstring+=d[c]:(wordlist[r]="l,",r++,wordstring="")):("("==brackets.charAt(brackets.length-1)?(wordlist[r]="b)",r++):(wordlist[r]="e",r++),brackets=brackets.slice(0,-1));else{if(wordlist.length>0){var p=wordlist[wordlist.length-1];p=p.substr(0,1),brackets+="f"==p||"v"==p?"v":"("}else brackets+="(";wordlist[r]="b(",r++}else 1==bcount?(constword=!1,s="c"+wordstring,wordlist[r]=s,r++,bcount=0,wordstring=""):(bcount--,wordstring+=d[c]);else bcount>0?wordstring+=d[c]:(constword=!0,wordstring=""),bcount++}for(var m=EWords.length,f=0;f<wordlist.length;f++)EWords.push(wordlist[f]);return m+","+(EWords.length-1)}function SaveAsDraft(){try{if(1==AxGlobalChange){var e=getTabDCStatus();ASB.WebService.SaveAsDraft(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,tst,tstDataId,e,SuccessCallbackDrafts,OnSaveDraftException)}}catch(a){ShowDimmer(!1),AxWaitCursor(!1)}}function getTabDCStatus(){var e="";for(i=0;i<TabDCs.length;i++)e+="DC"+TabDCs[i]+"-"+TabDCStatus[i]+",";return e.slice(0,-1)}function SuccessCallbackDrafts(e,a){CheckSessionTimeout(e)||ShowDimmer(!1)}function OnSaveDraftException(e){AxWaitCursor(!1),ShowDimmer(!1)}function GetDependentArray(){var e=new Array;if("true"!=displayAutoGenVal&&$j(".autogen").length>0){var a=$j(".autogen")[0].id,t=GetFieldsName(a),r=GetFieldIndex(t),o="";AxAutoGenFld=t,-1!=r&&(o=FldDependents[r].toString().substring(1)),""!=o&&(e=o.split(","))}return e}function ClearImageSrc(e){IsFormDirty||SetFormDirty(!0);var a=e.id.replace("del-","").trim();$j("#"+a).hasClass("signaturePad")&&$j("#"+a).attr("src","../AxpImages/signature.png"),$("#"+a).parents(".image-input").find(".delete-button").addClass("d-none"),$("#"+a).parents(".image-input").find(".imageFileUpload").removeClass("d-none"),$("#"+a).parents(".image-input").find(".profile-pic").addClass("d-none");var t=parseInt(GetFieldsRowNo(a),10);UpdateFieldArray(a,t,"","parent","")}function CheckAllListItems(e){var a=e.id,t=!0;t=!!$j("#"+a).prop("checked");var r=a.replace("chkAll_","").trim(),o=$j("#hideAll_"+r),i=$j("#chkAll_"+r),l=GetChkSeparator(GetFieldsName(r));if(t){var n="";$j("input:checkbox[id='"+r+"']").each(function(){if(0==$j(this).prop("disabled")){$j(this).attr("checked","checked"),$j(this).prop("checked",!0);var e=$j(this).val();""==n?n=e:n+=l+e}}),""!=n&&UpdateAssignedFld(r)}else $j("input:checkbox[id='"+r+"']").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});i.prop("checked")&&o.prop("checked")&&ShowSelectedChkItems("hideAll_"+r),!i.prop("checked")&&o.prop("checked")&&(o.removeAttr("checked"),o.prop("checked",!1));try{AxAfterCheckAll()}catch(s){}"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CheckDependencyPerf(r):CheckDependency(r)}function ShowSelectedChkItems(e){if(e!=undefined){var a=!0;a=!!$j("#"+e).prop("checked");var t=e.replace("hideAll_","").trim();$j("input:checkbox[id='"+t+"']").each(function(){a?$j(this).attr("checked")?$j(this).parent().show():$j(this).parent().hide():$j(this).parent().show()})}}function SetDcCaption(e,a){$j.inArray(e,TabDCs)>-1?$j("#ank"+e+" span.text").text(a):$j("#dcCaption"+e).text(a)}function SetDynamicDcCaptions(e){e=e||"";for(var a=0;a<DCFrameNo.length;a++)if(""==e||e==DCFrameNo[a]){var t=DCCaption[a].toString();if(-1!=t.indexOf("{")){for(var r=GetWordsBetweenCurlies(t),o=0;o<r.length;o++){var i=GetExactFieldName(r[o]),l="";if(-1!=GetFieldIndex(i)){var n=GetDcNo(i);l=IsGridField(i)?GetFieldValue(i+GetRowNoHelper(AxActiveRowNo)+"F"+n):GetFieldValue(i+"000F"+n)}else l=CheckGlobalVars(i);t=t.replace("{"+r[o]+"}",l)}SetDcCaption(DCFrameNo[a],t)}}}function GetWordsBetweenCurlies(e){for(var a,t=[],r=/{([^}]+)}/g;a=r.exec(e);)t.push(a[1]);return t}function EvaluateDcCaption(e,a){for(var t=e.split(","),r=0;r<t.length;r++)for(var o=0;o<DCFrameNo.length;o++)if(DCFrameNo[o].toString()==e){var i=DCCaption[o].toString();if(-1!=i.indexOf("{")){for(var l=GetWordsBetweenCurlies(i),n=0;n<l.length;n++){var s=GetExactFieldName(l[n]),d="";if(-1!=GetFieldIndex(s)){EvaluateAxFunction(s,s);var c=GetDcNo(s);d=GetFieldValue(s+GetRowNoHelper(AxActiveRowNo)+"F"+c)}else d=CheckGlobalVars(s);i=i.replace("{"+l[n]+"}",d)}SetDcCaption(DCFrameNo[o],i);break}}}var arrGlobalVars=new Array,arrGlobalVarValues=new Array;function CheckGlobalVars(e){var a=0;if(Parameters.length>1&&0==arrGlobalVars.length)for(var t=0;t<Parameters.length;t++){var r=Parameters[t].toString();r=r.split("~"),arrGlobalVars[a]=r[0].toString(),arrGlobalVarValues[a]=CheckSpecialCharInGlobalVar(r[1].toString()),a++}var o;return-1!=(o=$j.inArray(e,arrGlobalVars))?arrGlobalVarValues[o]:e}function UpdateAxpCurrDec(e,a){var t=new Array,r="";if((t=e.split(",")).length>0&&""!=e){r=t[0].toString();for(var o=-1,i=1;i<t.length;i++){var l=t[i];if(t[i].indexOf("~")>-1&&(l=t[i].toString().substr(0,t[i].indexOf("~"))),o=$j.inArray(l,FNames),FDecimal[o]=r,t[i].indexOf("~")>-1&&(r=t[i].toString().substring(t[i].toString().lastIndexOf("~")+1)),"GetDep"==a){if(currdecVal="",parseInt(r,10)>parseInt(FDupDecimals[o],10))return showAlertDialog("warning",2031,"client",FCaption[o]),void(currdecVal=FCaption[o]);var n="",s=FldFrameNo[o];if(IsGridField(l)){var d;d=parseInt(GetDcRowCount(s),10);for(var c=1;c<=d;c++){n=l+GetClientRowNo(c,s)+"F"+s;var p=NumericFldOnBlur(GetFieldValue(n),o);SetFieldValue(n,p),UpdateFieldArray(n,c,p,"parent")}}else{n=l+"000F"+s;p=NumericFldOnBlur(GetFieldValue(n),o);SetFieldValue(n,p);var m=GetFieldsRowNo(n),f=GetDbRowNo(m,s);UpdateFieldArray(n,f,p,"parent","")}}}}}function GetReferExpr(e,a,t){return t.indexOf("@")>-1?t.substring(1,t.indexOf("}")):t.startsWith("{")>-1?t.substring(1,t.indexOf("}")):Evaluate(e,a,t,"expr")}function OpenPdfFile(cmdVal,filepath,docID,dirName,saveAction){if(cmdVal=cmdVal||"",filepath=filepath||"",docID=docID||"",dirName=dirName||"",saveAction)return eval(callParent("isSaveAndPrintClick")+"= true"),eval(callParent("isSavePrintValues")+".push(cmdVal)"),eval(callParent("isSavePrintValues")+".push(filepath)"),eval(callParent("isSavePrintValues")+".push(docID)"),void eval(callParent("isSavePrintValues")+".push(dirName)");eval(callParent("isSaveAndPrintClick")+"= false"),eval(callParent("isSavePrintValues")+"=[]"),$j.ajax({url:"openfile.aspx/GetPdfFile",type:"POST",cache:!1,async:!1,data:JSON.stringify({urfpath:cmdVal,urdocid:docID,urpath:filepath,dirName:dirName}),dataType:"json",contentType:"application/json",beforeSend:function(){ShowDimmer(!0)},success:function success(data){if(null!=data.d||""!=data.d)if("error"!=data.d){if(jQBrowser.chrome||jQBrowser.opera||jQBrowser.safari)try{if(isMobile){var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if(openFastReportInNewWindow){var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else printJS(data.d)}catch(ex){var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if(jQBrowser.mozilla){var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if(jQBrowser.msie){var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else if(jQBrowser.msedge){var fileUrl=data.d,win;try{win=window.open("","fasrreport","width=600,height=400,menubar=yes,toolbar=yes,location=yes,status=yes,scrollbars=auto,resizable=yes"),win.location.href=fileUrl,win.focus(),setTimeout(function(){win.print()},5e3)}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}else{var URL=data.d,W;try{var params=["height="+screen.height,"width="+screen.width,"fullscreen=yes","scrollbars=yes","resizable=yes"].join(",");W=window.open(URL,"",params),W.moveTo(0,0),W.window.focus()}catch(ex){UpdateExceptionMessageInET("printfile exception : "+ex.message),showAlertDialog("warning",eval(callParent("lcm[356]")))}}setTimeout(function(){deletepdffile(data.d)},1e3)}else UpdateExceptionMessageInET("printfile exception : "+data.d),ShowDimmer(!1),ShowDialog("warning",data.d);else UpdateExceptionMessageInET("printfile exception : 2022"),ShowDimmer(!1),ShowDialog("warning",2022,"client")},error:function(e,a,t){UpdateExceptionMessageInET("printfile exception : 2022"),ShowDimmer(!1),ShowDialog("warning",2022,"client")}})}function deletepdffile(e){$j.ajax({url:"openfile.aspx/DeletePrintPDF",type:"POST",cache:!1,data:JSON.stringify({pdfPath:e}),async:!1,dataType:"json",contentType:"application/json",success:function(e){ShowDimmer(!1)},error:function(e,a,t){ShowDimmer(!1)}})}function ExecErrorMsg(e,a){for(var t=0;t<e.length;t++){var r,o=e[t].msg;e[t].errfld&&(r=e[t].errfld);for(var i=o.indexOf("^^dq");-1!=i;)i=(o=o.replace("^^dq",'"')).indexOf("^^dq");if(null!=o&&o!=undefined&&""!=o){if(o.indexOf("errfld")>-1&&(o=(o=o.substring(0,o.lastIndexOf("errfld")-2)).replace('",',"").replace('" ,',"")),UpdateExceptionMessageInET(a+" Error : "+o),"Action"==a&&(GetProcessTime(),GetTotalElapsTime()),showAlertDialog("error",o),"CancelTrans"==a)return;var l="";if(r){var n=r.toString().split(",");l=n[0];var s=GetDcNo(l),d=l+(p=GetClientRowNo(n[1],s))+"F"+s;(c=$j("#"+d)).length>0&&c.focus()}else if(""!=AxActiveField){var c,p=GetClientRowNo(AxActiveRowNo,AxActiveDc);d=AxActiveField+p+"F"+AxActiveDc;(c=$j("#"+d)).length>0&&c.focus()}}}}function getComntWf(e){var a=$j("#recordid000F0").val();$.ajax({url:"tstruct.aspx/GetWrkFlwCmmt",type:"POST",cache:!1,async:!0,data:JSON.stringify({tid:tst,rid:a}),dataType:"json",contentType:"application/json",success:function(a){for(var t=JSON.parse(a.d),r=0;r<t.length;r++){var o=t[r];for(var i in o){var l=o[i];delete o[i],o[i.toLowerCase()]=l}t[r]=o}for(var n='<table class="table table-bordered firstble table-fixed"><thead><tr><th class="col-sm-4">Date</th><th class="col-sm-2">Status</th><th class="col-sm-4">Comments</th><th class="col-sm-2">User</th></tr></thead><tbody>',s=0;s<t.length;s++)n+='<tr class="tblrowcolor" tabindex="0">',n+='<td class="col-sm-4"> '+t[s].datetime+"</td>",n+='<td class="col-sm-2">'+("return"==t[s].status?"Returned":t[s].status)+"</td>",n+='<td class="col-sm-4">'+t[s].comments+"</td>",n+='<td class="col-sm-2">'+t[s].username+"</td>",n+="</tr>";if(n+="</tbody>",$("#tblWrk").addClass("d-none"),$("#tblWrk").html(n),$("#collapseOneTable").html(n),$("#consumergoods2").addClass("d-none"),$("#btnWrfSave").addClass("d-none"),$("#btnWrfCancel").addClass("d-none"),e){$("#tblWrk").removeClass("d-none");var d=new BSModal("modalIdWfHistory","History",$("#tblWrk").html(),function(){$("#tblWrk").addClass("d-none")},function(){});d.changeSize("lg"),d.hideFooter(),d.scrollableDialog()}},error:function(e){console.log(e)}}),isWizardTstruct&&$("body").append($("#consumergoods").detach())}function getWfUsrName(e,a){for(var t=[],r=1;r<parseInt(e)+1;r++){for(var o="",i=0;i<a.length;i++)if(a[i].lno==r&&"-1"!=$j("#hdnWfLno").val())o+=""==o?a[i].un:","+a[i].un;else if("-1"==$j("#hdnWfLno").val()&&""==o)try{o+=a[$j("#hdnWfELno").val()].un}catch(l){o+=a[i].un}t.push(o)}return t}function getWfStatus(e,a){for(var t=[],r=!1,o=1;o<parseInt(e)+1;o++){var i="";r||(i="Notapplicable");for(var l=0;l<a.length;l++)if(a[l].lno==o&&"-1"!=$j("#hdnWfLno").val())r||(i=""),r=!0,""==i?"forwarded"==a[l].st.toLowerCase()?i+="reviewed":i+=a[l].st:"forwarded"==a[l].st.toLowerCase()?i+=",reviewed":i+=","+a[l].st;else if("-1"==$j("#hdnWfLno").val()&&(r||(i=""),r=!0,""==i))try{"forwarded"==a[$j("#hdnWfELno").val()].st.toLowerCase()?i+="reviewed":i+=a[$j("#hdnWfELno").val()].st}catch(n){"forwarded"==a[l].st.toLowerCase()?i+="reviewed":i+=a[l].st}t.push(i)}return t}function getWfLevelUSsrs(e,a,t,r,o,i){WrkflFlag=!0,ShowDimmer(!0);$j("#recordid000F0").val();var l=constructWrkHtml(a,t,r,o,i);$(l).insertAfter($(".icobtn")),$("#stratWrkf").after($(".workflowMsg").detach()),popoverWrkFl()}function constructWrkHtml(e,a,t,r,o){for(var i="",l="",n=0,s=0;s<parseInt(e);s++)if(o.length>n&&"-1"==$j("#hdnWfLno").val()&&r!=o[n].lno&&n++,"undefined"==typeof o[n]||o[n].lno==s+1||"-1"==$j("#hdnWfLno").val()){var d=t[s].toLowerCase();if(d.indexOf(",")>-1&&(d=(d=d.split(",")).indexOf("pending")>-1?"pending":d[d.length-1]),"forwarded"==d.toLowerCase()&&(d="reviewed"),(d.indexOf("pending")>-1||""==d)&&(d="Pending"),d.indexOf("rejected")>-1&&(d="rejected"),""==t[s])"pending"==(d="Pending").toLowerCase()&&""!=a[s]&&a[s]==user?l="Approval pending with you. ":"pending"==d.toLowerCase()&&""!=a[s]&&a[s]!=user&&(l="Approval pending with "+a[s]+" ");else if("undefined"!=typeof o[n]&&o[n].lno==r&&parseInt(r)==s+1){!function(){c=$j("#lblStatus").text(),null!=(p=c.match(/'([^']+)'/g))&&p.forEach(function(e){if(e.indexOf(".")>-1){var a=e.replace(/[.]/gi,"♣");c=c.replace(e,a)}}),m=c.split(".");var e=user.replace(/[.]/gi,"♣");m.forEach(function(a){(a.startsWith("Pending ")||a.startsWith(" Pending "))&&a.indexOf("'"+e+"'")>0?l="Approval pending with you. ":a.startsWith("Returned ")&&a.indexOf("'"+e+"'")>0&&(l=a.replace(/'/g,"").replace(/♣/g,"."))})}()}else if("pending"==d.toLowerCase()&&a[s]==user)l="Approval pending with you. ";else if("pending"==d.toLowerCase()&&a[s]!=user)l=(a[s].indexOf(","),"Approval pending with "+a[s]+" ");else if("approved"==d.toLowerCase()&&a[s]==user){var c,p,m;!function(){c=$j("#lblStatus").text(),null!=(p=c.match(/'([^']+)'/g))&&p.forEach(function(e){if(e.indexOf(".")>-1){var a=e.replace(/[.]/gi,"♣");c=c.replace(e,a)}}),m=c.split(".");var e=user.replace(/[.]/gi,"♣");m.forEach(function(a){a.indexOf("'"+e+"'")>0&&(l=a.replace(/'/g,"").replace(/♣/g,"."))})}()}else"approved"==d.toLowerCase()&&a[s]!=user?l=$j("#lblStatus").text().replace(/'/g,""):"rejected"==d.toLowerCase()&&a[s]==user?l="Approval rejected by you. ":"rejected"==d.toLowerCase()&&a[s]!=user?l="Approval "+$j("#lblStatus").text().replace(/'/g,""):"reviewed"==d.toLowerCase()&&a[s]==user?l="Approval Forwarded by you. ":"reviewed"==d.toLowerCase()&&a[s]!=user?l="Approval "+$j("#lblStatus").text().replace(/'/g,""):"autoforwarded"==d.toLowerCase()&&"system"==a[s]&&(l=$j("#lblStatus").text().replace(/'/g,""));"notapplicable"===d&&(d="NA");for(var f=0;f<o.length;f++)if(o[f].lno==r&&parseInt(r)==s+1&&"Pending"==d){i+='<div class="downArr workflowdisplayinline" id="workflowdropdown"><span class="workflowOptions btn btn-sm btn-icon btn-active-light-primary shadow-sm menu-dropdown" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end"><span class="workflowOptionAction material-icons material-icons-style">more_vert</span></span></div>';break}n++}return(l='<div class="workflowMsg workflowdisplayinline d-flex flex-row-auto px-4 py-2 fst-italic fst-bolder" data-content="'+l+'" data-toggle="popoverone" data-trigger="hover" data-placement="bottom">'+l+"</div>")+i}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function popoverWrkFl(){$('[data-toggle="popoverone"]').popover(),$("div[aria-expanded='false']")?$("#togglearrow").attr("title","Expand"):$("#togglearrow").attr("title","Collapse")}function LimtCharacters(e,a,t){chars=e.value.length,a-chars<0?document.getElementById(t).innerHTML="0 of 250":document.getElementById(t).innerHTML=a-chars+" of 250",chars>a&&(e.value=e.value.substring(0,a))}function popupFullPage(e){callParentNew("splitfull()","function"),$j("#middle1",parent.document).attr("src",e)}function setIviewNavigationData(e,a){if(""!=a)try{ASB.WebService.SetIviewNavigationData(e,a,function(){})}catch(t){}}function callExecuteScriptApi(e,a,t){if(actionCallFlag==actionCallbackFlag){actionCallFlag=Math.random(),$("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"auto"}),AxWaitCursor(!0),ShowDimmer(!0);try{ASB.WebService.CallExecuteScriptAPI(e,tstDataId,a,t,SuccessCallbackExecuteScriptApi,OnException)}catch(o){actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),AxWaitCursor(!1),ShowDimmer(!1);var r=o.name+"^♠^"+o.message;showAlertDialog("error",2030,"client",r)}}else $("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"none"})}function SuccessCallbackExecuteScriptApi(e,a){if(actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"}),!CheckSessionTimeout(e)){var t=JSON.parse(e);"undefined"!=typeof t.result[0].error?"undefined"!=typeof t.result[0].error.msg?showAlertDialog("error",t.result[0].error.msg):showAlertDialog("error",t.result[0].error[0].msg):showAlertDialog("success",t.result[0].msg),ArrActionLog="",AxWaitCursor(!1),ShowDimmer(!1)}}