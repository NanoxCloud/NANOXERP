/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function LoadIframeac(a){isTstructSplited=!1;try{AxOnLoadIframe()}catch(e){}if(1!==a.indexOf("iviewInteractive")&&(a=a.replace("iviewInteractive","iview")),window.globalChange){if(!confirm(appGlobalVarsObject.lcm[31]))return;SetFormDirty(!1)}else if($("#axpiframeac")[0].contentWindow.designChanged!=undefined&&1==$("#axpiframeac")[0].contentWindow.designChanged&&!confirm(appGlobalVarsObject.lcm[31]))return;var i="";try{(i=AxOnLoadMiddleIframe(a))==undefined&&""==i||(i.src="../../aspx/"+a)}catch(e){}return i!==undefined&&""!==i||(document.getElementById("axpiframeac").src=a),isTstructPopup=!1,!1}function SetFormDirty(a){IsFormDirty=a,window.globalChange=a,void 0!==$("#axpiframeac")&&$("#axpiframeac").attr("src").indexOf("tstruct.aspx")>-1&&"undefined"!=typeof tstAxpFileFlds&&1==tstAxpFileFlds&&(tstAxpFileFlds=!1,ASB.WebService.RemoveUnwantedAxpFiles())}function loadFrameAc(){"undefined"!=typeof $("#axpiframeac")[0].contentWindow.ShowDimmer&&$("#axpiframeac")[0].contentWindow.ShowDimmer(!1),$("body").addClass($.axpertUI.options.loader.parent.substr(1))}function closeFrameAc(){$("body").removeClass($.axpertUI.options.loader.parent.substr(1))}var menuLabel,navigationshow=callParentNew("navigationshow"),thmProj=callParentNew("thmProj"),mainProject=callParentNew("mainProject"),isBackClicked=!1,appLinkHistory=[],appLinkHistoryLabel=[],curPageIndex=0,prevClickFlag=!1,nextClickFlag=!1,histListFlag=!1;function prevbtn_click(a){if(a.hasClass("linkGray"))return!1;appLinkHistoryLabel.pop(),appLinkHistory.pop(),updateLinks(a,"prev")}function nextbtn_click(a){if(a.hasClass("linkGray"))return!1;updateLinks(a,"next")}function updateAppLinkObj(a){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,e=arguments.length>2&&arguments[2]!==undefined&&arguments[2],t=-1;try{t=AxCustomLinks(a)}catch(s){}var n=window.location.pathname.toLowerCase().split("/"),r=n.slice(0,n.indexOf("aspx")>-1?n.indexOf("aspx"):n.length).reduce(function(a,i){return i&&""==a?a+i:a},"")||"";t>-1?a="../"+mainProject+a.substr(a.indexOf("/aspx/")):a.toLowerCase().indexOf(tempCustomProjPath=window.location.origin.toLowerCase()+"/"+r+(r&&"/")+thmProj.toLowerCase()+"/aspx/")>-1?a="../"+a.substr(a.toLowerCase().indexOf("/"+thmProj.toLowerCase()+"/aspx/")+1):a.indexOf("/aspx/")>-1&&(a=a.substr(a.indexOf("/aspx/")+6));if(!i&&["mainnew.aspx","ivtstload.aspx","ivtoivload.aspx","err.aspx","adminconsole.aspx","configurationStudio.aspx","AutoComplete.aspx"].filter(function(i){return a.indexOf("/aspx/")>-1?a.substr(a.indexOf("/aspx/")+6)==i:a.indexOf(i)>-1}).length>0)return appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),histListFlag=!1,!1;if(appLinkHistory[appLinkHistory.length-1]==a)return appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),appLinkHistory.length-1>curPageIndex&&curPageIndex++,histListFlag=!1,!1;if(findGetParameter("ivname",appLinkHistory[curPageIndex])===(thisIvName=findGetParameter("ivname",a))&&thisIvName)return appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),(thisAxIvNav=findGetParameter("AxIvNav",a))&&"true"==thisAxIvNav&&(appLinkHistory[curPageIndex]=a),prevClickFlag=nextClickFlag=histListFlag=!1,!1;if(histListFlag)return prevClickFlag=nextClickFlag=histListFlag=!1,!1;if(prevClickFlag)return prevClickFlag=nextClickFlag=histListFlag=!1,!1;if(nextClickFlag)return nextClickFlag=prevClickFlag=histListFlag=!1,!1;if(e&&$("#axpiframe").hasClass("frameSplited"))return!1;if(a){if(0==appLinkHistory.length)return appLinkHistory.push(a),appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),menuLabel?appLinkHistoryLabel.push(menuLabel):1===t?appLinkHistoryLabel.push(updateHisLabel(a.substr(a.indexOf("/aspx/")+6))):appLinkHistoryLabel.push(updateHisLabel(a)),!1;if(appLinkHistory.length-1==curPageIndex)appLinkHistory.push(a),appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),curPageIndex=appLinkHistory.length-1,$(".linkNext").addClass("linkGray"),menuLabel?(appLinkHistoryLabel.push(menuLabel),menuLabel=""):1===t?appLinkHistoryLabel.push(updateHisLabel(a.substr(a.indexOf("/aspx/")+6))):appLinkHistoryLabel.push(updateHisLabel(a));else{if(appLinkHistory[curPageIndex]===a)return!1;curPageIndex+=1,findGetParameter("ivname",appLinkHistory[curPageIndex])===(thisIvName=findGetParameter("ivname",a))&&null!=thisIvName||appLinkHistory.splice(curPageIndex,0,a),appLinkHistory.length>1&&(void 0===navigationshow||"true"==navigationshow)&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).show(),menuLabel?appLinkHistoryLabel.splice(curPageIndex,0,menuLabel):appLinkHistory.length==curPageIndex?1===t?appLinkHistoryLabel.push(updateHisLabel(a.substr(a.indexOf("/aspx/")+6))):appLinkHistoryLabel.push(updateHisLabel(a)):1===t?appLinkHistoryLabel.splice(curPageIndex,0,updateHisLabel(a.substr(a.indexOf("/aspx/")+6))):appLinkHistoryLabel.splice(curPageIndex,0,updateHisLabel(a))}}return curPageIndex<=0?($(".linkPrev").addClass("linkGray"),$(".linkNext").addClass("linkGray")):($(".linkPrev").removeClass("linkGray"),$(".linkPrev").data("index",curPageIndex-1).data("url",appLinkHistory[curPageIndex-1])),updateHistList(),menuLabel="",!1}function updateHisLabel(a){var i="iview.aspx";if(-1!=a.indexOf(i)||-1!=a.toLowerCase().indexOf("ivtoivload.aspx")){var e=$("#middle1").contents().find("div#breadcrumb-panel").find(".bcrumb").find(".tstivCaption").text();return null!=findGetParameter("tstcaption",a)&&(e+=" - Listview"),(e=a.indexOf(i)>0?e+" - "+a.slice(0,a.indexOf(i)):e)||"Title Not Found"}if(-1!=a.indexOf("tstruct.aspx")){var t,n=(t=$("#middle1").contents()).find("input[type=text],textarea,select").filter(":visible:first");if(n&&""!=$.trim(n.val()))e=" - "+n.val();else{var r=getChildLabel(a);e=""!=r?r:" - New"}return t.find("div#breadcrumb-panel").find(".bcrumb").find(".tstivCaption").text()+e}return-1!=a.indexOf("listIview.aspx")?(t=$("#middle1").contents()).find("div#breadcrumb-panel").find(".bcrumb").find(".tstivCaption").text()+" - listview":a.slice(0,a.indexOf(".aspx"))}function getChildLabel(a){for(var i,e=a.split("?")[1].split("&"),t="",n=0;n<e.length;n++)e[n]&&("recordid"==(i=e[n].split("="))[0]&&(t=i[1]),"theMode"==i[0]&&(t=t+" - "+i[1]));return t}function updateHistList(){for(var a=[],i=appLinkHistoryLabel.length-1;i>=0;--i)-1===$.inArray(appLinkHistory[i],a)&&(a.push(appLinkHistory[i]),'<li class="histLi histLi'+i+'" title="'+appLinkHistoryLabel[i]+'" onclick="histListFlag = true; LoadIframeac(\''+appLinkHistory[i]+'\')"> <a href="javascript:void(0);" style="text-decoration: none;">'+appLinkHistoryLabel[i]+"</a></li>");appLinkHistoryLabel.length}function updateLinks(a,i){prevClickFlag=nextClickFlag=!1;var e,t=a.data("index");a.data("url");console.log("Next Link"),0==t&&$(".linkPrev").addClass("linkGray"),appLinkHistory.length-1==t&&$(".linkNext").addClass("linkGray"),"next"==i?(curPageIndex++,e=t+1,nextClickFlag=!0):(curPageIndex--,e=t-1,prevClickFlag=!0),a.data("index",e).data("url",appLinkHistory[e]),"next"==i?($(".linkPrev").data("index",curPageIndex-1).data("url",appLinkHistory[curPageIndex-1]),$(".linkPrev").removeClass("linkGray")):($(".linkNext").data("index",curPageIndex+1).data("url",appLinkHistory[curPageIndex+1]),$(".linkNext").removeClass("linkGray")),menuLabel="",isBackClicked=!0,LoadIframeac(appLinkHistory[curPageIndex]),0==curPageIndex&&$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).hide()}$(document).ready(function(a){$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).hide()}),$(".linkPrev").click(function(){prevbtn_click($(this))}),$(".linkNext").click(function(){nextbtn_click($(this))}),$(document).on("click","li.clearHisItem",function(){appLinkHistoryLabel=[],appLinkHistory=[],$(appGlobalVarsObject._CONSTANTS.navigation.backButton.div).hide(),updateHistList(),curPageIndex=0,prevClickFlag=nextClickFlag=!1,$(".linkPrev").addClass("linkGray"),$(".linkNext").addClass("linkGray")});